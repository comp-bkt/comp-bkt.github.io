<!DOCTYPE html>
<html lang="en">

<head>
   <title>D M A</title>
   <meta charset="utf-8" />
   <link rel="icon" href="assets/favicon.ico">
   <meta name="author" content="ebbi, patrick" />
   <meta name="description" content="Android App development" />
   <meta name="keywords" content="android, software tutorial" />
   <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
   <link href="css/main.css" rel="stylesheet" type="text/css" />

</head>

<body id="body-root" class="day">

   <header class="header flexbox">

      <nav id="navbar">
         <span> <a id="toggle-nav" class="logo">&#9776;</a> </span>
         <!--span > <a data-article="home-page" href="index.html">&#127968;</a> </span-->
         <span > <a data-article="home-page">&#127968;</a> </span>
         <!--span> <a href="https://my.leedsbeckett.ac.uk/bbcswebdav/pid-2588705-dt-content-rid-13438553_1/courses/13281-1910/index.html">&#127968;</a> </span -->
         
      
      </nav>

   </header>

   <main id="mainContainer" class="flexbox">

      <!-- Main Nav ************************************************ -->
      <nav id="nav-panel" class="flexbox-item nav-panel">

         <nav id="nav-main">
            
            <!-- register a listener for the top nav home-->
            <span data-article="home-page"></span>
            
            <details id="config" class="nav-section-end">

               <summary>&#9881; config</summary>

               <div class="nav-section-end">
               <nav>
                  <ul id="colour-scheme">
                     <li><button id="day">&#127774; day</button></li>
                     <li><button id="night">&#9790; night</button></li>
                     <li><button id="high-contrast">High Contrast</button></li>
                  </ul>
               </nav>

               </div>
            </details>

            <details id="nav-android" class="nav-section-end">
               <summary data-article="android-overview">Android</summary>

               <details class="nav-section-end">
                  <summary>Lab Exercises</summary>
                  <ul>                 
                     <li class="nav-section-end left-margin-none">
                        <details>
                           <summary>Lab Exercises</summary>
                           <ul class="external-link">
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-layout-editor-part-a/#0">Your first interactive UI</a>
                              </li>
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-layout-editor-part-b/#0">The layout editor</a>
                              </li>
                              <li class="nav-section-end">
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-text-and-scrolling-views/#0">Text and scrolling views</a>
                              </li>

                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-create-an-activity/#0">Activities and intents</a>
                              </li>
                              <li class="nav-section-end">
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-activity-lifecycle-and-state/#0">Activity lifecycle and state</a>
                              </li>
                           </ul>
                        </details>
                     </li>
                     
                     <li class="nav-section-end left-margin-none">
                        <details>
                           <summary>Todo App</summary>
                           <ul>
                              <li data-article="todo-first">First todo app</li>
                              <li data-article="todo-detail">Todo detail app</li>
                           </ul>
                        </details>
                     </li>

                     <li class="nav-section-end left-margin-none">
                        <details>
                           <summary>Navigation</summary>
                           <ul class="external-link">        
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-clickable-images/index.html?index=..%2F..android-training#0">Clickable images</a>
                              </li>
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-provide-user-navigation/#0">User navigation</a>
                              </li>
                              <li class="nav-section-end">
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-create-recycler-view/#0">RecyclerView</a>
                              </li>
                           </ul>
                        </details>
                     </li>
                     
                     <li class="nav-section-end left-margin-none">
                        <details>
                           <summary>Fragments</summary>
                           <ul class="external-link">
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/codelabs/advanced-android-training-fragments/index.html?index=..%2F..index#0">Fragments</a>
                                 </li>
                           </ul>
                        </details>
                     </li>
                     <li class="nav-section-end left-margin-none">
                        <details>
                           <summary>Todo App &mdash; revisited</summary>
                           <ul>
                              <li data-article="todo-fragment">Todo Fragment App</li>
                              <li data-article="todo-component">Todo Component App</li>
                              <li class="nav-section-end" data-article="todo-sqlite-persistence">Todo Persistence App</li>
                              <li data-article="todo-mvvm">Todo MVVM App</li>
                           </ul>
                        </details>
                     </li>

                     <!--li class="nav-section-end">
                        <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-activity-with-implicit-intent/#0">Implicit intents</a>
                     </li-->
                     <li class="left-margin-none">
                        <details>
                           <summary>Android Developer</summary>
                           <ul>
                              <li>
                                 <a target="_blank" href="https://github.com/android/architecture-samples/tree/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp">Google blueprint Todo App</a>
                              </li>
                              <li>
                                 <a target="_blank" href="https://codelabs.developers.google.com/android-training/">Fundamentals Course</a>
                              </li>
                           </ul>

                        </details>
                     </li>

                  </ul>
               </details>

               <details class="nav-section-end">
                  <summary>Lecture Notes</summary>
                  <ul>
                     <li data-article="java-review-slide">Java Review</li>
                     <li data-article="android-platform-slide">Android Platform</li>
                     <li data-article="activity-intent-slide">Activity &amp; Intent</li>
                     <li data-article="events-listeners-slide">Events &amp; Listeners</li>
                     <li data-article="fragments-slide" class="nav-section-end">Fragments</li>
                     <li data-article="java-review">Threads</li>
                     <li data-article="architecture-slide">Architecture</li>
                  </ul>
               </details>

            </details>

         </nav>
      
      </nav>

      <div id="section-main" class="flexbox-item">
         <!-- 
           * article for each slide in section hidden id="articles-hidden"
           * nav has data-id_of_article used for cloning article from hidden section
           * js replaces the article-container article by the article chosen in nav
          -->
         <div id="article-container">
            <article><h1>hidden article replaced by JS based on user navigation</h1></article>
         </div>

      </div>
   
   </main>

   <button id="btnToTop" title="Go to top">&#128285;</button>
   
   <!-- HIDDEN section *********************************************** -->

   <!-- Hidden slides dynamically loaded by JS 
      * Each slide is an article
      * nav has data-id_of_article with click event for cloning article from articles-hidden
      * and inserting it into slides-container
      *
      * svg data-* attributed define any speech id and event 
      -->

   <div id="articles-hidden" hidden>

      <!-- Hidden articles displayed by JS after nav selection ******* -->

      <article id="home-page">
         <h1 class="hidden">Hidden articles displayed by JS after nav selection</h1>

         <div class="panel">
            
            <details class="panel" open>
               <summary>
               Lectures and Labs
               </summary>           
               <nav>
                  <ul>
                     <li class="panel" data-article="android-overview">Developing Mobile Apps &mdash; Android</li>
                  </ul>
               </nav>
            </details>
         </div>
         
      </article>

      <article id="android-overview" class="lab-sheet panel">

         <h2>Mobile Apps &mdash; Android &nbsp;</h2>
         <details class="panel">
            <summary>
               Assumed programming knowledge.  Start with a review.
            </summary>

            <pre class="slide-small"><code class="prettyprint">Can you explain static types and methods?
if (true) {
   continue with the lab exercises  
} else {
   Read <a target="_blank" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-092-introduction-to-programming-in-java-january-iap-2010/lecture-notes/">Introduction to Programming in Java &dash; from MIT</a>
   Watch <a target="_blank" href="https://www.youtube.com/watch?v=ckYwv4_Qtmo">Java Memory Management</a>, video from Virtual Pair Programmers   
   <a target="_blank" href="http://www.greenteapress.com/thinkjava5/index.html">Think Java</a> is useful as reference
   Use the Android &amp; Stackoverflow search in the header
}</code></pre>
            <p>
               The Introduction to Programming in Java is a good concise reference. See the lecture notes and complete the exercises. This is a minimum needed before attempting to code in any framework such as Android.
            </p>
         </details>
         
         <details class="panel">
            <summary>Install Android Studio Development Environment</summary>

            <ul class="external-link">
               <li>
                  <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-hello-world/index.html?index=..%2F..%2Fandroid-training#0">Install Android Studio and related Tasks</a>
               </li>
            </ul>
            <p>During the installation, Select:</p>
            <ul>
               <li>SDK platform: Android 12.0 API 32</li>
               <li>Virtual Device: Pixel 4 API 32</li>
            </ul>
            <p>Test the installation with a <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-hello-world/index.html?index=..%2F..%2Fandroid-training#0">Hello World App and related tasks</a>. For:</p>
            <ul>
               <li>Task 2: select Java and an Empty Activity for the Project Template</li>
               <li>Task 3 and 4: for slower computers, instead of virtual device try connecting a physical phone</li>
            </ul>
                        
            <details class="panel">
               <summary>Bug Alert! (Jan/2020) Emulators do break on some platforms</summary>
               <p>Jan/21 &mdash; Android Studio 4.1.1 has issues with emulators on some platforms.  Generally, these are resolved by lower level graphics card settings or other configuration.  A good start is to search for the error message online.</p>
               <p>Other errors could be resolved with settings within Android.  A recent example, the display is messed up on rotation.  A possible fix:</p>
               <ol>
                  <li>Select AVD Manager from the top level Tools menu</li>
                  <li>Right-mouse click on the device and click Show on Disk</li>
                  <li>Edit the config.ini file and change hw.gpu.mode = software</li>
                  <li>Restart the emulator</li>
               </ol>
            </details>
            
         </details>

         <details class="panel nav-section-end">
            <summary>Lab Exercises</summary>
            <ul>
               <li>For all exercises, select <strong>Java</strong> and use <strong>API 32: Android 12.0 for Minimum SDK</strong></li>
            </ul>
            <ul class="list-style-type-none">
               <li>
                  <details open>
                     <summary>Manifest, View, Activity, Intent, LifeCycle, State</summary>
                     <ul class="external-link">
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-layout-editor-part-a/#0">Your first interactive UI</a>
                        </li>
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-layout-editor-part-b/#0">The layout editor</a>
                        </li>
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-text-and-scrolling-views/#0">Text and scrolling views</a>
                        </li>

                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-create-an-activity/#0">Activities and intents</a>
                           <ul class="list-style-type-none">
                              <li> Read the <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-1-c-activities-and-intents/2-1-c-activities-and-intents.html">Activities and intents concepts</a></li>
                           </ul>
                        </li>
                        <li class="nav-section-end">
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-activity-lifecycle-and-state/#0">Activity lifecycle and state</a>
                           <ul class="list-style-type-none">
                              <li> Read the <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-2-c-activity-lifecycle-and-state/2-2-c-activity-lifecycle-and-state.html">Activity lifecycle and state concepts</a></li>
                           </ul>
                        </li>
                     </ul>
                  </details>
               </li>
            </ul>
         </details>

         <details class="panel nav-section-end">
            <summary>Case Study &mdash; &quot;Todo App&quot;</summary>
            <ul class="list-style-type-none">

               <li>
                  <details>
                     <summary>Todo App</summary>
                     <ul>
                        <li data-article="todo-first">First todo app</li>
                        <li data-article="todo-detail">Todo detail app</li>
                     </ul>
                  </details>
               </li>

               <li>
                  <details>
                     <summary>Navigation</summary>
                     <ul class="external-link">        
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-clickable-images/index.html?index=..%2F..android-training#0">Clickable images</a>
                        </li>
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-provide-user-navigation/#0">User navigation</a>
                        </li>
                        <li class="nav-section-end">
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-create-recycler-view/#0">RecyclerView</a>
                        </li>
                     </ul>
                  </details>
               </li>

               <li>
                  <details>
                     <summary>Fragments</summary>
                     <ul class="external-link">
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/advanced-android-training-fragments/index.html?index=..%2F..index#0">Fragments</a>
                        </li>
                     </ul>
                  </details>
               </li>
               <li>
                  <details>
                     <summary>Todo App &mdash; revisited</summary>
                     <ul>
                        <li data-article="todo-fragment">Todo Fragment App</li>
                        <li data-article="todo-component">Todo Component App</li>
                        <li class="nav-section-end" data-article="todo-sqlite-persistence">Todo Persistence App</li>
                        <li data-article="todo-mvvm">Todo MVVM App</li>
                     </ul>
                  </details>
               </li>

               <li class="nav-section-end">
                  <details>
                     <summary>Implicit Intent</summary>
                     <ul class="external-link">
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-activity-with-implicit-intent/#0">Implicit intents</a>       
                        </li>
                     </ul>
                  </details>
               </li>
               <li>
                  <details>
                     <summary>Android Developer</summary>
                     <ul class="external-link">
                        <li>
                           <a target="_blank" href="https://github.com/android/architecture-samples/tree/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp">Google blueprint Todo App</a>
                        </li>
                        <li>
                           <a target="_blank" href="https://codelabs.developers.google.com/android-training/">Fundamentals Course</a>
                        </li>
                     </ul>

                  </details>
               </li>

            </ul>
            
         </details>

         <details class="panel nav-section-end">
            <summary>Lecture Notes</summary>
            <ul>
               <li data-article="java-review-slide">Java Review</li>
               <li data-article="android-platform-slide">Android Platform</li>
               <li data-article="activity-intent-slide">Activity &amp; Intent</li>
               <li data-article="events-listeners-slide">Events &amp; Listeners</li>
               <li data-article="fragments-slide" class="nav-section-end">Fragments</li>
               <li data-article="architecture-slide">Architecture</li>
            </ul>
         </details>


         <details class="panel">
            <summary>
               Reading &amp; Lab test preparation
            </summary>
            <h3>Book</h3>
            <ul>
               <li>
                  Android Programming, The Big Nerd Ranch Guide, Bill Phillips et. al.
               </li>
            </ul>
            <h3>Articles (Android Developer)</h3>
            <ul class="external-link">
               <li>
                  <a target="_blank" href="https://developer.android.com/guide/components/fundamentals/">Android application fundamentals</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-1-build-your-first-app/1-1-c-your-first-android-app/1-1-c-your-first-android-app.html">Build your fist app</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-1-c-activities-and-intents/2-1-c-activities-and-intents.html">Activities and intents</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-2-c-activity-lifecycle-and-state/2-2-c-activity-lifecycle-and-state.html">Activity lifecycle and state</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-3-c-implicit-intents/2-3-c-implicit-intents.html">Implicit intents</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-2-user-experience/lesson-4-user-interaction/4-4-c-user-navigation/4-4-c-user-navigation.html">User navigation</a>
               </li>
               <li>
                  <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-2-user-experience/lesson-4-user-interaction/4-5-c-recyclerview/4-5-c-recyclerview.html">RecyclerView</a>
               </li>


               <li>
                  <a target="_blank" href="https://developer.android.com/guide/components/activities/">Activity and life cycle</a>
               </li>
               <li>
                  <a target="_blank" href="https://developer.android.com/guide/components/activities/activity-lifecycle">Understand the Activity Life cycle</a>
               </li>

            </ul>
         </details>

      </article>

      <article id="todo-first" class="lab-sheet panel">


            <h2>A first <em>todo</em> app &nbsp;</h2>
            
            <p>
               The code for this exercise can be found at: <a target="_blank" href="https://github.com/comp-bkt/todo-first-app">https://github.com/comp-bkt/todo-first-app</a>
            </p>
            <p>
               <em>First todo app</em> <code class="prettyprint" data-article="todo-first">: MVC, Manifest, Activity, onCreate, View Objects, lifecycle, Listeners, Anonymous functions, event handlers, callbacks, Bundle, Resources </code>
            </p>



         <section>

            <details class="panel">
               <summary>Overview</summary>

               <h2>Activity class, XML Layouts and View objects</h2>

               <p>
                  For simplicity, in this TODO app implementation the data is a simple <code class="prettyprint">static-array</code> defined as a resource; in later exercises, the model logic and data is abstracted into its own model classes.
               </p>
               <p>
                  Android <code class="prettyprint">View</code> objects, implement methods to draw themselves on the screen and provide for Events to handle user input. The layout and the View objects hierarchy are defined in XML and are inflated into <code class="prettyprint">View</code> objects as part of a <code class="prettyprint">Activity</code> class initialisation.
               </p>
               <p>
                  <code class="prettyprint">Activity</code> classes in Android, connect the view and the model objects together by responding to events triggered by View objects and manage the flow of data between the model and the view. A <code class="prettyprint">click</code> on a <code class="prettyprint">Button</code> View object is a common example of an event handled by a <code class="prettyprint">Activity</code> class.
               </p>
               <p>
                  Android framework lends itself to the MVC architecture and it follows naturally particularly with the view objects and layout being abstracted and separately defined in XML and the <code class="prettyprint">Activity</code> classes controlling the User Interaction(UI) on the view objects. The separation of the Model and the Controller has to follow good programming practice. A controller as its name suggest should only have control logic and delegate all else to model classes.
               </p>
            </details>

            <details class="panel">
               <summary>Create an Android project</summary>
               <pre class="slide-small">In Android Studio:
   
<kbd>Start a new Android Studio project</kbd>

Application Name: <code class="prettyprint">Android_todo_first</code>

Package Name: <code class="prettyprint">example.com</code>

(check the <code class="prettyprint">project name</code> is at the end of the <em>project location</em> pathname.)
<kbd>Next</kbd>

select the option, <strong>Phone and Tablet</strong>
For Language select: <strong>Java</strong>
and for Minimum SDK, select: <strong>API 32: Android 12.0</strong>
<kbd>Next</kbd>

<strong>Select Empty Activity</strong>
<kbd>Next</kbd>

change the Activity Name to <code class="prettyprint">TodoActivity</code>, keep the defaults
<kbd>Finish</kbd> 

<em>Android Studio creates all the necessary files and opens the IDE.</em>

<kbd>Run &gt; Run App</kbd>

Setup or use an existing virtual device, 
choose <strong>Pixel 4 API 32 targeted for Android 12.0 (Google Play)</strong>

(installing the virtual device may take some time.)
Once Android is running, the default 'Hello World!' message is displayed.
</pre>
   <!--
                <details>
                  <summary>Bug Alert! Emulator breaks on rotation</summary>
                  <p>Jan/20 &mdash; Android Studio 4.1.1 has an issue with emulators.  The display is messed up on rotation.  A fix for now:</p>
                  <ol>
                     <li>Select AVD Manager from the top level Tools menu</li>
                     <li>Right-mouse click on the device and click Show on Disk</li>
                     <li>Edit the config.ini file and change hw.gpu.mode = software</li>
                     <li>Restart the emulator</li>
                  </ol>
               </details>
    -->
            </details>

            <details class="panel">
               <summary>Model</summary>

               <p>
                  This first <code class="prettyprint">Todo</code> prototype cycles through a list of Todos without any further complexity or persistent storage. As such all that is needed is a <code class="prettyprint">todos</code> array which can be stored as a <code class="prettyprint">string-array</code> resource.
               </p>
               <details>
                  <summary>Add a <code class="prettyprint">todos</code> string array as a <code class="prettyprint">resource</code></summary>
                  <p>
                     Open the <code class="prettyprint">res/values/string.xml</code> file and replace the <code class="prettyprint">resources</code> XML element with the following:
                  </p>
                  <pre class="slide-small"><code class="prettyprint">&lt;resources&gt;
            
   &lt;string name="app_name"&gt;Android_todo_first&lt;/string&gt;

   &lt;string-array name="todos"&gt;
      &lt;item&gt;Wake up&lt;/item&gt;
      &lt;item&gt;Drink Coffee&lt;/item&gt;
      &lt;item&gt;Make at least one person laugh&lt;/item&gt;
      &lt;item&gt;Plant a tree&lt;/item&gt;
      &lt;item&gt;Ponder on duality of existance&lt;/item&gt;
      &lt;item&gt;Go to sleep&lt;/item&gt;
   &lt;/string-array&gt;
   
&lt;/resources&gt;</code></pre>

               </details>
               <p>
                  <q cite="https://developer.android.com/reference/android/view/View">
                     As part of the build process, the SDK tools generate symbols for each resource, which you can use in your application code to access the resources.
                  </q>
               </p>
               <p>
                  <q cite="https://developer.android.com/guide/topics/resources/providing-resources">
                     Resources are the additional files and static content that your code uses, such as bitmaps, layout definitions, user interface strings, animation instructions, and more. See: <a target="_blank" href="https://developer.android.com/guide/topics/resources/providing-resources">App resources overview</a>
                  </q>
               </p>
               <p>
                  Symbols, <code class="prettyprint">app_name</code> and <code class="prettyprint">todos</code> can now be used as global variables!
               </p>
            </details>

            <details class="panel">
               <summary>View</summary>
               <p>
                  The Android <code class="prettyprint">View</code> class represents the basic building block for user interface components. Android provides a set of User Interactive components (button, text fields, etc.) referred to as <em>widgets</em>. <code class="prettyprint">View</code> is the base class for <em>widgets</em>. The <code class="prettyprint">View</code> widgets can be grouped together into invisible container classes known as <code class="prettyprint">layouts</code>.
               </p>
               <p>
                  <q cite="https://developer.android.com/guide/topics/ui/">Android also provides other UI modules for special interfaces such as dialogs, notifications, and menus.</q>. To get started, read <a target="_blank" href="https://developer.android.com/guide/topics/ui/declaring-layout">layouts</a> and review <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-1-build-your-first-app/1-2-c-layouts-and-resources-for-the-ui/1-2-c-layouts-and-resources-for-the-ui.html">Layouts and resources for the UI</a>

               </p>

               <details>
                  <summary><code class="prettyprint">Todo</code> View</summary>
                  <p>
                     The <code class="prettyprint">Todo</code> view definition below is an XML definition of a <code class="prettyprint">ConstraintLayout</code> container that contains the definition of a <code class="prettyprint">TextView</code> widget intended to hold the <code class="prettyprint">todo</code> text and two <code class="prettyprint">Button</code> widgets for <em>next</em> and <em>prev</em> cycling through the <code class="prettyprint">todos</code>.
                  </p>
                  <p>
                     Open the <code class="prettyprint">res/layout/activity_todo.xml</code> file and replace the content with the following view definition.
                  </p>
                  <details>
                     <summary><code class="prettyprint">Todo</code> view definition</summary>
                     <pre class="slide-small"><code class="prettyprint">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".TodoActivity"&gt;

    &lt;TextView
        android:id="@+id/textViewTodo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/todos"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;Button
        android:id="@+id/buttonPrev"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:layout_marginBottom="16dp"
        android:text="@string/prev"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintHorizontal_bias="0"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toLeftOf="@+id/buttonNext" /&gt;

    &lt;Button
        android:id="@+id/buttonNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp"
        android:layout_marginEnd="16dp"
        android:text="@string/next"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintRight_toRightOf="parent" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre>
                  </details>

                  <p>
                     Note, the <span class="error">errors</span>, <code class="prettyprint">Cannot resolve symbol</code> for resource names.
                  </p>
                  <p>
                     To define these resources (constant strings!), open the <code class="prettyprint">res/values/string.xml</code> file and insert the following after the <code class="prettyprint">app_name</code> definition.
                  </p>
                  <pre class="slide-small"><code class="prettyprint">&lt;string name="todos"&gt;Todos&lt;/string&gt;
&lt;string name="next"&gt;Next&lt;/string&gt;
&lt;string name="prev"&gt;Prev&lt;/string&gt;</code></pre>

                  <p>
                     <kbd>Run</kbd> the app to see the view.
                  </p>

               </details>
            </details>

            <details class="panel">
               <summary>Controller</summary>
               <p>
                  Android <code class="prettyprint">Activity</code> is the <em>controller</em> class for any view and it's user interaction. For a brief overview, read <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-1-c-activities-and-intents/2-1-c-activities-and-intents.html#activitynavigation">the first section on activities</a>.
               </p>
               <p>
                  The <code class="prettyprint">TodoActivity</code> class has the default skeleton of an activity <code class="prettyprint">controller</code> class with the default <code class="prettyprint">onCreate</code> method override.
               </p>

               <p>
                  The first call in <code class="prettyprint">onCreate</code> is to the parent <code class="prettyprint">onCreate</code> to complete task such as building the View hierarchy. And second, a call to <code class="prettyprint">setContentView(R.layout.activity_todo)</code>. If this is not clear, please read <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-1-c-activities-and-intents/2-1-c-activities-and-intents.html#activitynavigation">the first section on activities</a>.
               </p>

               <p>
                  <kbd>Run</kbd> the app and remind yourself of the view. The User interaction to be coded is with the click events on the <code class="prettyprint">prev</code> and <code class="prettyprint">next</code> view buttons.
               </p>
               <p>
                  A click event on an object requires a click <code class="prettyprint">listener</code> and a corresponding handler method to respond to the click event. The following implementation reuses the view object <code class="prettyprint">setOnClickListener</code> and an anonymous function to handle the event.
               </p>
               <p>
                  Handling the click event is to override the <code class="prettyprint">onClick</code> event with code to update the <code class="prettyprint">textView</code> object with the current <code class="prettyprint">todo</code> data. Before this, the <code class="prettyprint">todo</code> data has to be retrieved from the <code class="prettyprint">string-array</code>.
               </p>

               <p>
                  Overall logic:
               </p>

               <ol>
                  <li>
                     initialise <code class="prettyprint">TodoTextView</code> object for displaying <code class="prettyprint">todos</code>
                  </li>
                  <li>
                     read an array, <code class="prettyprint">mTodos</code>, from <code class="prettyprint">res/values/strings.xml</code>
                  </li>

                  <li>
                     display the first task from <code class="prettyprint">mTodos</code> array in the <code class="prettyprint">TodoTextView</code>
                  </li>
                  <li>
                     initialise <code class="prettyprint">buttonNext</code> to override its <code class="prettyprint">setOnClickListener</code>
                  </li>
                  <li>
                     instantiate a new anonymous <code class="prettyprint">View.OnClickListener</code> function as a handler for the <code class="prettyprint">buttonNext.onClickListener</code>.
                  </li>
                  <li>
                     override the <code class="prettyprint">onClick</code> method in the anonymous function to cycle the <code class="prettyprint">mTodo</code> array (checking for the end of array) and update the <code class="prettyprint">TodoTextView</code> with the current todo.
                  </li>
               </ol>

               <details>
                  <summary><code class="prettyprint">TodoActivity</code> code</summary>
                  <pre class="slide-small"><code class = "prettyprint">public class TodoActivity extends AppCompatActivity {

   private String[] mTodos;
   private int mTodoIndex = 0;

   @Override
   protected void onCreate(Bundle savedInstanceState) {

      /* call the super class onCreate to complete the creation 
         of activity with state changes */
      super.onCreate(savedInstanceState);

      // set the user interface layout for this Activity
      setContentView(R.layout.activity_todo);

      // initialize member TextView so we can manipulate it later
      final TextView TodoTextView;
      TodoTextView = (TextView) findViewById(R.id.textViewTodo);

      // read the todo array from res/values/strings.xml
      Resources res = getResources();
      mTodos = res.getStringArray(R.array.todos);
      
      // display the first task from mTodo array in the TodoTextView
      TodoTextView.setText(mTodos[mTodoIndex]);

      Button buttonNext;
      buttonNext = (Button) findViewById(R.id.buttonNext);

      // OnClick listener for the  Next button
      buttonNext.setOnClickListener(new View.OnClickListener(){
         @Override
         public void onClick(View v) {
             mTodoIndex += 1;
             TodoTextView.setText(mTodos[mTodoIndex]);
         }
      });
   }
}</code></pre>
               </details>

               <ol>
                  <li>
                     Update the <code class="prettyprint">TodoActivity</code> class with the code above
                  </li>
                  <li>
                     <kbd>Run</kbd> the code
                  </li>
                  <li>
                     Note, the <span class="error">errors</span>, <code class="prettyprint">Cannot resolve symbol</code>.
                  </li>
                  <li>
                     To resolve the <span class="error">errors</span>, click on each object and press the keys, <kbd>alt return</kbd> to add the import statement for the object referenced.
                  </li>
                  <li>
                     <kbd>Run</kbd> the code again
                  </li>
                  <li>
                     the code should compile and run with a logic error. The <code class="prettyprint">Next</code> button crashes on the last item in the <code class="prettyprint">Todos</code> array.
                  </li>
                  <li>
                     See the Debug section for resolving the error
                  </li>
               </ol>

            </details>

            <details class="panel">
               <summary>Debug</summary>
               <p>
                  <em>Compile time errors</em> are generally to do with syntactical rules and relatively easy to correct. Read the error message (at least twice!) and if it is not clear, search the error message in known sites such as <a target="_blank" href="https://developer.android.com/guide/index.html">Android Developer API Guides (note, the site has a powerful search)</a> and <a target="_blank" href="https://stackoverflow.com/questions/tagged/android">Stack overflow</a>.
               </p>
               <p>
                  <em>Run time errors</em> are due to inconsistency in the program logic or algorithm. For example, the <code class="prettyprint">TodoActivity</code> runs fine until the index is incremented beyond the last element of the <code class="prettyprint">todos</code> array.
               </p>
               <p>
                  If the run time error message was not immediately clear then the next step is to see the stack trace in the Android Monitor tab (bottom tool bar). There is generally a link with the class name and line number that you could click. This is the last statement that could not be executed.
               </p>
               <p>
                  If examining the stack trace did not resolve the run time error; it is useful to set a debugging break point at the line number the execution stopped.
               </p>
               <ol>
                  <li>
                     Click on the left margin of the line of code, mTodoIndex += 1; and notice the red circle.
                  </li>
                  <li>
                     <kbd>Run &gt; Debug 'app'</kbd>
                  </li>
                  <li>
                     Click on <kbd>Next</kbd> and note how the program stops at the break point just set.
                  </li>
                  <li>
                     Note the values of the variables. Hovering over any object or variable will reveal their current value.
                  </li>
                  <li>
                     Try stepping through the code and see the <code class="prettyprint">mTodoIndex</code> values until it crashes.
                  </li>
                  <li>
                     Stepping through the code between break points and examining expected values provide further information for resolving runtime error messages.
                  </li>
               </ol>

               <details>
                  <summary>Solution to <code class="prettyprint">TodoActivity</code> error <span class="error">ArrayIndexOutOfBoundsException</span></summary>
                  <p>
                     There is a failure in the logic in that the index for the array is incremented without checking for the end of the array. This leads to an attempt to access a non-existent element of the array, hence, <span class="error">ArrayIndexOutOfBoundsException</span>
                  </p>
                  <p>
                     Correct code that does check for the size of the array:<br />
                     <code class="prettyprint>">mTodoIndex = (mTodoIndex + 1) % mTodos.length;</code><br /> (Note, % in Java returns the remainder, hence the index will never exceed the array size an alternative less efficient solution would be to test for the size of the array).
                  </p>
               </details>

            </details>

            <details class="panel">
               <summary>Activity Life cycle and the "rotation problem"</summary>
               <p>
                  To see the rotation problem:
               </p>
               <ol>
                  <li>
                     <kbd>Run</kbd> the app and move to the second todo
                  </li>
                  <li>
                     rotate the phone and notice the display is the first todo
                  </li>
               </ol>
               <p>
                  Every instance of an <code class="prettyprint">Activity</code> has a life cycle and transitions between 4 states namely, <em>resumed, paused, stopped</em> and <em>nonexistent</em> with corresponding methods: <code class="prettyprint">onCreate, onDestroy, onStart, onStop, onResume</code> and <code class="prettyprint">onPause</code>. These methods are called life cycle callbacks. We override these callbacks and Android calls the <em>life cycle callbacks</em> at the appropriate time such as after rotating the phone.
               </p>
               <p>
                  Read this overview of <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-2-activities-and-intents/2-2-c-activity-lifecycle-and-state/2-2-c-activity-lifecycle-and-state.html">Activity lifecycle and state</a>.
               </p>
               <p>
                  The solution to <em>rotation problem</em> is to store the <code class="prettyprint">TODO_INDEX</code> across rotation state changes. On rotating the phone, Android calls the <code class="prettyprint">Activity</code>'s callback method <code class="prettyprint">onSaveInstanceState(Bundle)</code>. This method can be overridden and include code to store the <code class="prettyprint">TODO_INDEX</code>.
               </p>
               <pre class="slide-small"><code class="prettyprint">/* In case of state change, such as rotating the phone,
   store the mTodoIndex */

/* override to write the value of mTodoIndex into 
   the Bundle with TODO_INDEX as its key */
   
private static final String TODO_INDEX = "todoIndex";

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putInt(TODO_INDEX, mTodoIndex);
}</code></pre>
               <p>
                  Once the phone is rotated, Android calls the <code class="prettyprint">Activity</code>'s <code class="prettyprint">onCreate(Bundle savedInstanceState)</code> callback method. Note, the <code class="prettyprint">Bundle</code> object <code class="prettyprint">savedInstanceState</code> has the <code class="prettyprint">TODO_INDEX, mTodoIndex)</code> <em>key, value</em> pair. The index can be retrieved in the <code class="prettyprint">onCreate</code> callback method and the correct <code class="prettyprint">todo</code> displayed.
               </p>
               <pre class="slide-small"><code class="prettyprint">/* check for saved state due to changes such as rotation 
   and restore any saved state such as the TODO_INDEX */
if (savedInstanceState != null){
  mTodoIndex = savedInstanceState.getInt(TODO_INDEX, 0);
}</code></pre>
               <p>
                  <kbd>Run</kbd> the app, press <kbd>Next</kbd>, rotate the phone and the same <code class="prettyprint">todo</code> should display, whereas previously it reset to the first <code class="prettyprint">todo</code>.
               </p>

               <h3>Landscape view</h3>
               <p>
                  Android detects the device configuration change and looks for resources that better match the changed configuration. For views, Android uses a configuration qualifier namely, using <code class="prettyprint">-land</code> suffix in the directory name.
               </p>

               <p>
                  Try the following, to create a new landscape <code class="prettyprint">todo</code> view.
               </p>
               <ol>
                  <li>
                      At the project tab (top right), switch from <kbd><u>Android</u></kbd> to <kbd><u>Project</u></kbd> view
                  </li>
                  <li>
                     Open <code class="prettyprint">app/src/main/res</code>
                  </li>
                  <li>
                     <kbd>Right-mouse click</kbd> on the <code class="prettyprint">res</code> folder and create a new Directory named, <code class="prettyprint">layout-land</code>
                  </li>
                  <li>
                     <kbd>Right-mouse click</kbd> on the <code class="prettyprint">layout-land</code> directory and create a new file named, <code class="prettyprint">activity_todo.xml</code> (the same filename as the portrait view definition)
                  </li>
                  <li>
                     <details>
                        <summary>Landscape view definition <code class="prettyprint">activity_todo.xml</code></summary>
                        <pre class="slide-small"><code class="prettyprint">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".TodoActivity"&gt;

    &lt;TextView
        android:id="@+id/textViewTodo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/todos"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        android:textColor="@android:color/holo_green_dark"
        android:textSize="36sp" /&gt;

    &lt;Button
        android:id="@+id/buttonPrev"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:layout_marginBottom="16dp"
        android:text="@string/prev"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintHorizontal_bias="0"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toLeftOf="@+id/buttonNext" /&gt;

    &lt;Button
        android:id="@+id/buttonNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp"
        android:layout_marginEnd="16dp"
        android:text="@string/next"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintRight_toRightOf="parent"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre>
                     </details>

                  </li>
               </ol>

            </details>
            <br />
            <details class="panel">
               <summary>Tasks</summary>
               <ol>
                  <li>
                     Create the <em>first todo app</em>
                  </li>
                  <li>
                     Fix the runtime bug in the <code class="prettyprint">TodoActivity</code> <code class="prettyprint">Next</code> button crashing at the end of the <code class="prettyprint">Todos</code> array. (see the Debug section)
                  </li>
                  <li>
                     Similar to <code class="prettyprint">Next</code>, add the code for the <code class="prettyprint">Prev</code> button.
                  </li>
                  <li>
                     Update the code to solve the "rotation problem"
                  </li>
                  <li>
                     Add a landscape view; <kbd>Run</kbd> and check for state changes in both views
                  </li>
                  <li>
                     Make notes for the following: <code data-article="todo-first">: MVC, Manifest, Activity, onCreate, View Objects, lifecycle, Listeners, Anonymous functions, event handlers, callbacks, Bundle, Resources </code>
                  </li>
                  <li>
                     Starting from the <code class="prettyprint">manifest</code> main <code class="prettyprint">activity</code>, walk-through the code showing your understanding of the design and the implementation. How many steps and questions can you write down from the start in <code class="prettyprint">manifest</code> to the view being displayed?
                     <ul>
                        <li>
                           Manifest defines the main activity which has an <code class="prettyprint">onCreate</code> callback method
                        </li>
                        <li>
                           <pre class="slide-small"><code class="prettyprint">/* call the super class onCreate to complete the creation
of activity with state changes */
super.onCreate(savedInstanceState);

/* set the user interface layout for this Activity */
setContentView(R.layout.activity_todo);</code></pre>
                        </li>
                        <li>Questions at this point in the walk-through the code:
                           <ul>
                              <li>What is <code class="prettyprint">R</code>?</li>
                              <li>What is <code class="prettyprint">savedInstanceState</code> and <code class="prettyprint">Bundle</code>?</li>
                              <li>What format is the content of <code class="prettyprint">activity_todo</code>?</li>
                              <li>What attribute defines the view object id?</li>
                           </ul>
                        </li>
                        <li>
                           Next step is an <code class="prettyprint">event</code> and a similar walk-through the <code class="prettyprint">event</code> handler
                        </li>
                        <li>
                           Complete the walk-through; use breakpoints and comment your code
                        </li>
                     </ul>

                  </li>
               </ol>
            </details>

         </section>



      </article>

      <article id="todo-detail" class="lab-sheet panel">

            <h2>A <em>todo detail</em> app &nbsp;</h2>
            <p>
               The code for this exercise can be found at: <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">https://github.com/comp-bkt/todo-detail-app</a>
            </p>
            <p>
               <em>Todo detail app</em> <code class="prettyprint" data-article="todo-detail">: Intent, Extra, Communicating between activities, Static method, MVC, Activity, Intent, View Objects, Listeners, Anonymous functions, event handlers, callbacks, lifecycle, state instances, Bundle </code>
            </p>
            
            <details class="panel">
               <summary>
                  Activity and Intent
               </summary>

               <p>
                  The MVC implementation of a todo list of todos each with a todo detail. In terms of a class diagram, this could be a <code class="prettyprint">todolist</code> activity class associated with a <code class="prettyprint">todoDetail</code> Activity class. To create these classes an <code class="prettyprint">intent</code> communication object is passed from the <code class="prettyprint">todoList</code> activity to the <code class="prettyprint">ActivityManger</code> in Android which returns the intended <code class="prettyprint">todoDetail</code> object. This is after a user event selecting a todo for its details. Consider the following sequence diagram and follow the steps to create a <code class="prettyprint">todoDetailApp</code>.
               </p>

               <details class="panel">
                  <summary>Sequence diagram &mdash; todoDetail app</summary>
                   <p>Please note that the following image shows <u>startActivityForResult</u> and  <u>onActivityResult()</u>. These are deprecated and replaced with the <u>ActivityResultContracts</u> </p>
                  <img class="full-width" src="assets/todo_uml_sequence.png" alt="todoApp sequence diagram">
               </details>


            </details>

            <details class="panel">
               <summary>
                  Create an Android project
               </summary>
               <pre class="slide-small">In Android Studio:
   
<kbd>Start a new Android Studio project</kbd>

Application Name: <code class="prettyprint">todo-detail-app</code>

Package Name: <code class="prettyprint">example.com</code>

(check the <code class="prettyprint">project name</code> is at the end of the <em>project location</em> pathname.)
<kbd>Next</kbd>

select the option, <strong>Phone and Tablet</strong>
and from the drop-down list, select: <strong>API 32: Android 12</strong>
<kbd>Next</kbd>

<strong>Select Empty Activity</strong>
<kbd>Next</kbd>

change the Activity Name to <code class="prettyprint">TodoActivity</code>, keep the defaults
<kbd>Finish</kbd> 

<em>Android Studio creates all the necessary files and opens the IDE.</em>

<kbd>Run &gt; Run App</kbd>

Setup or use an existing virtual device, 
choose <strong>API 32 targeted for Android 12 (Google Play)</strong>

(installing the virtual device may take some time.)  
Once Android is running, the default 'Hello World!' message is displayed.
</pre>

            </details>

            <details class="panel">
               <summary>
                  Model
               </summary>
               <p>
                  A very basic model for testing is an array of <code class="prettyprint">todos</code> with a corresponding array of <code class="prettyprint">todo_detail</code>.
               </p>
               <p>
                  Open the <code class="prettyprint">res/values/string.xml</code> file and replace the <code class="prettyprint">resources</code> XML element with the corresponding content from the <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">git repository</a>.
               </p>

               <p>
                  <q cite="https://developer.android.com/reference/android/view/View">
                     As part of the build process, the SDK tools generate symbols for each resource, which you can use in your application code to access the resources.
                  </q>
               </p>
               <p>
                  <q cite="https://developer.android.com/guide/topics/resources/providing-resources">
                     Resources are the additional files and static content that your code uses, such as bitmaps, layout definitions, user interface strings, animation instructions, and more. See: <a target="_blank" href="https://developer.android.com/guide/topics/resources/providing-resources">App resources overview</a>
                  </q>
               </p>
               <p>
                  Symbols, <code class="prettyprint">app_name</code> and <code class="prettyprint">todos</code> can now be used as global variables!
               </p>
            </details>

            <details class="panel">
               <summary>
                  View
               </summary>
               <p>
                  The Android <code class="prettyprint">View</code> class represents the basic building block for user interface components. Android provides a set of User Interactive components (button, text fields, etc.) referred to as <em>widgets</em>. <code class="prettyprint">View</code> is the base class for <em>widgets</em>. The <code class="prettyprint">View</code> widgets can be grouped together into invisible container classes known as <code class="prettyprint">layouts</code>.
               </p>
               <p>
                  <q cite="https://developer.android.com/guide/topics/ui/">Android also provides other UI modules for special interfaces such as dialogs, notifications, and menus.</q>. To get started, read <a target="_blank" href="https://developer.android.com/guide/topics/ui/declaring-layout">layouts</a> and review <a target="_blank" href="https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/unit-1-get-started/lesson-1-build-your-first-app/1-2-c-layouts-and-resources-for-the-ui/1-2-c-layouts-and-resources-for-the-ui.html">Layouts and resources for the UI</a>

               </p>

               <details>
                  <summary><code class="prettyprint">TodoDetail</code> View</summary>
                  <p>
                     The <code class="prettyprint">TodoDetail</code> view definitions have the <code class="prettyprint">ConstraintLayout</code> container that contains the definition of the remainning widgets intended to hold the todos and their details.
                  </p>
                  <p>
                     Replace the <code class="prettyprint">res/layout/</code> files with the corresponding content from the <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">git repository</a>
                  </p>

                  <p>
                     Note, the <span class="error">errors</span>, <code class="prettyprint">Cannot resolve symbol</code> for resource names.
                  </p>
                  <p>
                      To define these resources, view the corresponding content from the <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">git repository</a> - <code class="prettyprint">colors.xml, strings.xml and styles.xml</code>
                  </p>

                  <p>
                     <kbd>Run</kbd> the app to see the view.
                  </p>

               </details>
            </details>

            <details class="panel">
               <summary>
                  Controller
               </summary>
               <ul>
                  <li>
                     Refere to the sequence diagram. The <code class="prettyprint">TodoActivity</code> controller has a Todo details button click event and associated onClick handler.
                  </li>
                  <li>
                      The button has a <code class="prettyprint">onClickListener</code> handler which calls  the <code class="prettyprint">onClick()</code> method. This will call a <code class="prettyprint">static method in the TodoDetailActivity</code> controller, passing it the id of the todo and receiving the intent object. It also launches the activity through an <code class="prettyprint">ActivityResultLauncher</code> object that will have an <code class="prettyprint">ActivityResultContract</code> registered to handle the return event of coming back to the Todo Activity.
                     <pre class="slide-small"><code class = "prettyprint">Intent intent = TodoDetailActivity.newIntent(
                     TodoActivity.this, mTodoIndex);</code></pre>
                  </li>
                  
                     <pre class="slide-small"><code class = "prettyprint">todoDetailActivityResultLauncher.launch(intent);</code>
                     </pre> 
                   
                   <pre class="slide-small"><code class = "prettyprint">ActivityResultLauncher&lt;Intent&gt; todoDetailActivityResultLauncher = <br />
    registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),<br />
        /* written as a Lamda expression*/
        result -&gt; {
        /*our code called on returning back to Activity*/<br />       
        }
    );
        </code>
        </pre>
                  
                  <li>
                     Refer to the <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">git repository</a> code and create the <code class="prettyprint">TodoActivity</code> and <code class="prettyprint">TodoDetailActivity</code> classes.
                  </li>
               </ul>

            </details>
            <br />
            <details class="panel">
               <summary>
                  Tasks
               </summary>
               <ol>
                  <li>
                     Create the <em>todo detail app</em>
                  </li>
                  <li>
                     Similar to <code class="prettyprint">Next</code>, add the code for the <code class="prettyprint">Prev</code> button.
                  </li>
                  <li>
                     Update the code to solve the "rotation problem"
                  </li>
                  <li>
                     Add a landscape view; <kbd>Run</kbd> and check for state changes in both views
                  </li>
                  <li>
                     Add a landscape view; <kbd>Run</kbd> and check for state changes in both views
                  </li>

                  <li>
                     Make notes for the following: <code class="prettyprint" data-article="todo-first">: Intent, Extra, Communicating between activities, Static method</code>
                  </li>
                  <li>
                     Starting from the <code class="prettyprint">manifest</code> main <code class="prettyprint">activity</code>, walk-through the code showing your understanding of the design and the implementation of the <em>todo detail</em> use case. How many steps and questions can you write down from the start in <code class="prettyprint">manifest</code> to the view being displayed?
                     <ul>
                        <li>
                           Manifest defines the main activity which has an <code class="prettyprint">onCreate</code> callback method
                        </li>
                        <li>
                           Register an ActivityResultLauncher - see code in Controller section above and refer to github source code.</li>
                        <li>
                           Anonymous detail <code class="prettyprint">onClick</code> event handler
                        </li>
                        <li>
                           <pre class="slide-small"><code class="prettyprint">buttonTodoDetail.setOnClickListener(new View.OnClickListener(){
   @Override
   public void onClick(View v) {
      /* code to create intent and call ActivityResultLauncher */
      }
});</code></pre>
                        </li>
                         
                        <li>Questions at this point in the walk-through the code:
                           <ul>
                              <li>What is a static method? and why use it here?</li>
                              <li>What is in <code class="prettyprint">newIntent</code>?</li>
                              <li>Where is the <code class="prettyprint">todo</code> index stored?</li>
                              <li>&hellip;</li>
                           </ul>
                        </li>
                        <li>
                           Next explanation could be an <code class="prettyprint">event</code> and a similar walk-through the <code class="prettyprint">event</code> handler in the <code class="prettyprint">detail</code> view checkbox for completed todos
                        </li>
                        <li>
                           Complete the walk-through; use breakpoints and comment your code
                        </li>
                        <li>
                           Add a new use case to indicate a pending incomplete <code class="prettyprint">todo</code> (similar to checkbox for completed todo)
                        </li>
                        <li>
                           Explain <code class="prettyprint">ActivityResultContracts</code>
                        </li>
                     </ul>

                  </li>
               </ol>
            </details>

      </article>

      <article id="todo-fragment" class="lab-sheet panel">
            <h2>A <em>Todo Fragment</em> App &nbsp;</h2>
            <p>
               The code for this exercise can be found at: <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app">https://github.com/comp-bkt/todo-fragment-app</a>
            </p>
            <p>
               <em>Todo fragment app</em> <code class="prettyprint" data-article="todo-fragment">: MVC, FragmentManager, FragmentTransaction, Fragment, Inflater, View Objects, callbacks</code>
            </p>

            <details class="panel">
               <summary>
                  Fragments
               </summary>

               <p>
                  Whilst the Android XML view definition and view objects provide for seperation of the V in MVC, the view remains tightly coupled with the Activity class. This is problematic in principle. The V in MVC needs to be more decoupled and further abstracted so that it could be composed and recomposed as necessary at run time.
               </p>
               <p>
                  It is true that an Activities view may change at run time but the code for the change is inside the activity, hence the tight coupling. To decouple is to abstract the view control code out of the Activity and delegate it to another class. This is achieved in Android with fragments.
               </p>
               <p>
                  A fragment is a controller object that an activity can delegate view management tasks to. The Activity's own view can have a placeholder(s) defined to insert any fragment(s) view. This decoupling allows for views to be dynamically recomposed as the result of device or user requirements and events.
               </p>



            </details>
            <p>
               Note in the following class diagram for an example todo fragmnet app:
            </p>
            <ul>
               <li>
                  Activity provides a view container
               </li>
               <li>
                  Inflating the view is delegated to a Fragment controller
               </li>
               <li>
                  The data source for the view is with the Fragment controller (not Activity)
               </li>
            </ul>

            <details class="panel">
               <summary>
                  Class diagram &mdash; todoFragment app
               </summary>
               <img class="full-width" src="assets/todo_uml_object_mvc.png" alt="todoApp class diagram">
            </details>

            <details class="panel">
               <summary>
                  Create an Android project
               </summary>
               <pre class="slide-small">In Android Studio:
   
<kbd>Start a new Android Studio project</kbd>

Application Name: <code class="prettyprint">todo-fragment-app</code>

Company Domain: <code class="prettyprint">example.com</code>

(check the <code class="prettyprint">project name</code> is at the end of the <em>project location</em> pathname.)
<kbd>Next</kbd>

select the option, <strong>Phone and Tablet</strong>
and from the drop-down list, select: <strong>API 27: Android 8.1 (Oreo)</strong>
<kbd>Next</kbd>

<strong>Select Empty Activity</strong>
<kbd>Next</kbd>

change the Activity Name to <code class="prettyprint">TodoActivity</code>, keep the defaults
<kbd>Finish</kbd> 

<em>Android Studio creates all the necessary files and opens the IDE.</em>

<kbd>Run &gt; Run App</kbd>

Setup or use an existing virtual device, 
choose <strong>Nexus 5X API 27 targeted for Android 8.1 (Google Play)</strong>

(installing the virtual device may take some time.)  
Once Android is running, the default 'Hello World!' message is displayed.
</pre>
            </details>
            <details class="panel">
               <summary>
                  Native Android or Support Libraries?
               </summary>
               <ul>
                  <li>Support libraries were created to accommodate for older versions of Android. Google provided <code class="prettyprint">support-v4</code> which includes fragment support <code class="prettyprint">android.support.v4.app.Fragment</code></li>
                  <li>The single support library is now a group of libraries including: <code class="prettyprint">support-v7, appcompat-v7, recyclerview-v7</code> and many more</li>
                  <li><em>Avoid the native Android OS implemetations and use the Support library versions. Many more releases and easier to update.</em></li>
               </ul>
            </details>

            <p>
               The following are brief highlights of the important points (the code can be found at: <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app">https://github.com/comp-bkt/todo-fragment-app</a>)
            </p>

            <details class="panel">
               <summary>
                  Model
               </summary>
               <p>
                  Being a controller class, the TodoFragment sits between the model and the view and supports the getter and setter methods for the data in the view.
               </p>
               <p>
                  The model is currently a Plane Old Java Object(POJO) with the getter and setter methods for the data that represents a Todo. See the <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app/blob/master/app/src/main/java/com/example/todoapp/Todo.java">Todo.java class.</a>
               </p>
               <p>
                  The data source is abstracted to <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app/blob/master/app/src/main/java/com/example/todoapp/TodoModel.java">TodoDS java class</a>. Note, the class has:
               </p>
               <ul>
                  <li>
                     <code class="prettyprint">private</code> constructor
                  </li>
                  <li>
                     <code class="prettyprint">public static get</code> method to return the same TodoModel object instance (simple implementation of Singleton pattern)
                  </li>
               </ul>
            </details>

            <details class="panel">
               <summary>
                  View
               </summary>
               <p>
                  Consider the Class diagram
               </p>
               <ul>
                  <li>
                     Activity has an empty container View layout object
                  </li>
                  <li>
                     Fragments can be dynamically loaded into the Activity layout
                  </li>
               </ul>
               Replicate the <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app/tree/master/app/src/main/res/layout">view defintions</a> and their <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app/blob/master/app/src/main/res/values/strings.xml">associated string constants</a>


            </details>

            <details class="panel">
               <summary>
                  Controller
               </summary>

               <ul>
                  <li>
                     Activity <code class="prettyprint">onCreate</code> has a <code class="prettyprint">FragmentManager</code>
                  </li>
                  <li>
                     the <code class="prettyprint">FragmentManager</code> dynamically loads the fragment views within a fragment transaction
                  </li>
                  <li>
                     Fragment <code class="prettyprint">onCreateView</code> uses the <code class="prettyprint">inflator</code> class to create the view objects from the XML definitions
                  </li>
               </ul>
               <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app/tree/master/app/src/main/java/com/example/todoapp">https://github.com/comp-bkt/todo-fragment-app/tree/master/app/src/main/java/com/example/todoapp</a>
            </details>
            <br />
            <details class="panel">
               <summary>
                  Tasks
               </summary>
               <ol>
                  <li>
                     Create the <em>todo fragment app</em> (see code: <a target="_blank" href="https://github.com/comp-bkt/todo-fragment-app">https://github.com/comp-bkt/todo-fragment-app</a> )
                  </li>
                  <li>
                     Starting from the <code class="prettyprint">manifest</code> main <code class="prettyprint">activity</code>, walk-through the code showing your understanding of the design and the implementation of the <em>todo fragment</em>. How many steps and questions can you write down from the start in <code class="prettyprint">manifest</code> to the view being displayed?
                     <ul>
                        <li>
                           Why use fragments?
                        </li>
                        <li>
                           Why a fragment transaction?
                        </li>
                        <li>
                           What does <code class="prettyprint">inflator</code> do?
                        </li>
                        <li>
                           Why <code class="prettyprint">onCreate</code> and <code class="prettyprint">onCreateView</code>?
                        </li>
                        <li>
                           Use the code from <a target="_blank" href="https://github.com/comp-bkt/todo-detail-app">todo-detail-app</a> examples; refactor the views to use fragments
                        </li>
                        <li>
                           Incorporate the <code class="prettyprint">TodoModel</code> (currently not used; see the <a target="_blank" href="https://github.com/ebbi/todo-list-app">todo-list-app</a> as an example of (non persistent) CRUD operation for creating and updating todos). Implement CRUD operation use cases.
                        </li>
                        <li>
                           &hellip;
                        </li>
                     </ul>

                  </li>
               </ol>
            </details>

      </article>

      <article id="todo-component" class="lab-sheet panel">
            <h2>A <em>Todo Component</em> App &nbsp;</h2>
            <p>
               The code for this exercise can be found at: <a target="_blank" href="https://github.com/ebbi/todo-component-app">https://github.com/ebbi/todo-component-app</a>
            </p>
            <p>
               <em>Todo component app</em> <code class="prettyprint" data-article="todo-component">: Vertical and horizontal swipes with RecyclerView and ViewPager, Fragments, Toolbar + Create, Read, Update a todo </code>
            </p>

            <details class="panel">
               <summary>
                  RecyclerView
               </summary>
               <ul>
                  <li>
                     For scrolling list of elements use
                     <a target="_blank" href="https://developer.android.com/guide/topics/ui/layout/recyclerview">RecyclerView</a>
                  </li>
                  <li>
                     Recycles (reuses) <code class="prettyprint">view</code> objects to fill a screen
                  </li>
                  <li>
                     <code class="prettyprint">RecyclerView</code> relies on an <code class="prettyprint">Adapter</code> with a typical sequence of calls:
                     <ol>
                        <li><code class="prettyprint">getItemCount()</code></li>
                        <li>create a new <code class="prettyprint">viewHolder</code> with a call to the adapter's <code class="prettyprint">onCreateViewHolder()</code></li>
                        <li>Adpter looks up model data and fills the list item's <code class="prettyprint">viewHolder view</code></li>
                        <li><code class="prettyprint">RecyclerView</code> places the list item on the screen</li>
                        <li>Once enough <code class="prettyprint">viewHolder</code>'s have been created to fill the screen, they are reused</li>
                     </ol>
                  </li>
               </ul>
               <details>
                  <summary><code class="prettyprint">RecyclerView</code> &amp; Todo fragments</summary>

                  <details>
                     <summary>Create a <code class="prettyprint">RecyclerView</code> in the <code class="prettyprint">onCreateView</code> method</summary>

                     <pre class="panel"><code class="prettyprint prettyprinted" style=""><span class="typ">In</span><span class="pln"> </span><span class="typ">TodoListFragment</span><span class="pun">:</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">RecyclerView</span><span class="pln"> mTodoRecyclerView</span><span class="pun">;</span><span class="pln">

mTodoRecyclerView </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">RecyclerView</span><span class="pun">)</span><span class="pln"> 
    view</span><span class="pun">.</span><span class="pln">findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">todo_recycler_view</span><span class="pun">);</span><span class="pln">
</span><span class="com">// it will crash without a LayoutManager</span><span class="pln">
mTodoRecyclerView</span><span class="pun">.</span><span class="pln">setLayoutManager</span><span class="pun">(</span><span class="pln"> 
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LinearLayoutManager</span><span class="pun">(</span><span class="pln">getActivity</span><span class="pun">())</span><span class="pln"> </span><span class="pun">);</span></code></pre>
                  </details>

                  <details>
                     <summary>Just like <code class="prettyprint">Fragments</code>, <code class="prettyprint">RecyclerView</code> has its own <code class="prettyprint">view</code> hierarchy</summary>
                     <pre class="panel"><code class="prettyprint prettyprinted" style=""><span class="typ">In</span><span class="pln"> fragment_todo_list</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">:</span><span class="pln">
</span><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"utf-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="pun">&lt;!--</span><span class="pln"> A </span><span class="typ">RecyclerView</span><span class="pln"> </span><span class="kwd">with</span><span class="pln"> some commonly used attributes </span><span class="pun">--&gt;</span><span class="pln">
</span><span class="pun">&lt;</span><span class="pln">android</span><span class="pun">.</span><span class="pln">support</span><span class="pun">.</span><span class="pln">v7</span><span class="pun">.</span><span class="pln">widget</span><span class="pun">.</span><span class="typ">RecyclerView</span><span class="pln">
    xmlns</span><span class="pun">:</span><span class="pln">android</span><span class="pun">=</span><span class="str">"http://schemas.android.com/apk/res/android"</span><span class="pln">
    android</span><span class="pun">:</span><span class="pln">id</span><span class="pun">=</span><span class="str">"@+id/todo_recycler_view"</span><span class="pln">
    android</span><span class="pun">:</span><span class="pln">scrollbars</span><span class="pun">=</span><span class="str">"vertical"</span><span class="pln">
    android</span><span class="pun">:</span><span class="pln">layout_width</span><span class="pun">=</span><span class="str">"match_parent"</span><span class="pln">
    android</span><span class="pun">:</span><span class="pln">layout_height</span><span class="pun">=</span><span class="str">"match_parent"</span><span class="pln"> </span><span class="pun">/&gt;</span></code></pre>
                  </details>

                  <details>
                     <summary>Define the <code class="prettyprint">ViewHolder</code> to inflate and fill the layout</summary>
                     <pre class="panel"><code class="prettyprint prettyprinted" style=""><span class="typ">In</span><span class="pln"> </span><span class="typ">TodoListFragment</span><span class="pun">:</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TodoHolder</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">RecyclerView</span><span class="pun">.</span><span class="typ">ViewHolder</span><span class="pln">
  </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">TodoHolder</span><span class="pun">(</span><span class="typ">LayoutInflater</span><span class="pln"> inflater</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ViewGroup</span><span class="pln"> parent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">inflater</span><span class="pun">.</span><span class="pln">inflate</span><span class="pun">(</span><span class="pln">
          R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">list_item_todo</span><span class="pun">,</span><span class="pln"> parent</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
                  </details>

                  <details>
                     <summary>Create the <code class="prettyprint">Adapter</code> and override three methods</summary>
                     <pre class="panel"><code class="prettyprint prettyprinted" style=""><span class="typ">In</span><span class="pln"> </span><span class="typ">TodoListFragment</span><span class="pun">:</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TodoAdapter</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> 
    </span><span class="typ">RecyclerView</span><span class="pun">.</span><span class="typ">Adapter</span><span class="pun">&lt;</span><span class="typ">TodoListFragment</span><span class="pun">.</span><span class="typ">TodoHolder</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Todo</span><span class="pun">&gt;</span><span class="pln"> mTodos</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">TodoAdapter</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Todo</span><span class="pun">&gt;</span><span class="pln"> todos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      mTodos </span><span class="pun">=</span><span class="pln"> todos</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">TodoListFragment</span><span class="pun">.</span><span class="typ">TodoHolder</span><span class="pln"> onCreateViewHolder</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">ViewGroup</span><span class="pln"> parent</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> viewType</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">LayoutInflater</span><span class="pln"> layoutInflater </span><span class="pun">=</span><span class="pln"> 
        </span><span class="typ">LayoutInflater</span><span class="pun">.</span><span class="kwd">from</span><span class="pun">(</span><span class="pln">getActivity</span><span class="pun">());</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TodoHolder</span><span class="pun">(</span><span class="pln">layoutInflater</span><span class="pun">,</span><span class="pln"> parent</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onBindViewHolder</span><span class="pun">(</span><span class="pln">
      </span><span class="typ">TodoHolder</span><span class="pln"> holder</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> position</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Todo</span><span class="pln"> todo </span><span class="pun">=</span><span class="pln"> mTodos</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">position</span><span class="pun">);</span><span class="pln">
    holder</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="pln">todo</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getItemCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> mTodos</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
                  </details>

                  <details>
                     <summary>Bind List Items</summary>
                     <p>Seperating creation and binding allows views to be (Recycled) reused</p>
                     <ul>
                        <li>The binding starts with the views in the <code class="prettyprint">ViewHolder</code> constructor</li>
                        <li>
                           <code class="prettyprint">ViewHolder</code> relies on a <code class="prettyprint">bind(data)</code> method to set the values of views it holds.
                        </li>
                     </ul>
                  </details>

               </details>

            </details>

            <details class="panel">
               <summary>
                  Tasks
               </summary>
               <ol>
                  <li>
                     Create the <em>todo component app</em>
                  </li>
                  <li>
                     Edit the <code class="prettyprint">TodoModel</code> constructor and increase the loop to 30 test todos.
                  </li>
                  <li>
                     Run and swipe vertically
                  </li>
                  <li>
                     Select a todo and swipe horizontally
                  </li>
                  <li>
                     Note + in the toolbar for adding a todo
                  </li>

                  <li>
                     Try adding delete
                  </li>
                  <li>
                     Improve navigation
                  </li>

               </ol>
            </details>

      </article>
    
      <article id="todo-sqlite-persistence" class="lab-sheet panel">      
         <h2>A <em>Todo Persistence</em> App</h2>
         <header class="article-header">
            <p>
               The code for this exercise can be found at: <a target="_blank" href="https://github.com/ebbi/todo-persistence-app">https://github.com/ebbi/todo-persistence-app</a>
            </p>

            <ul>
               <li><code class="prettyprint">SQlite</code> &mdash; Create, Read, Update Todo</li>
               <li>File store &mdash; Implicit intent for camera and picture stored in a file</li>
               <li>Builds on <code class="prettyprint">Todo Fragment App</code> and <code class="prettyprint">Todo Component App</code> examples</li>
            </ul>

         </header>
         
         <details class="panel">
            
            <summary>SQlite &mdash; <span class="caution">deprecated</span></summary>
            
            <div class="caution">
               <p>
                  From Android Documentation on <a target="_blank" href="https://developer.android.com/training/data-storage/sqlite"><code class="prettyprint">android.database.sqlite</code></a>
               </p>
               <p>
                  <b>Caution:</b> Although these APIs are powerful, they are fairly low-level
                  and require a great deal of time and effort to use:
               </p>
               <ul>
                  <li>There is no compile-time verification of raw SQL queries. As your data
                     graph changes, you need to update the affected SQL queries manually. This
                     process can be time consuming and error prone.</li>
                  <li>You need to use lots of boilerplate code to convert between SQL queries
                     and data objects.</li>
               </ul>

               <p>For these reasons, we <strong>highly recommended</strong> using the
                  <a target="_blank" href="https://developer.android.com/training/data-storage/room">Room Persistence Library</a>
                  as an abstraction layer for accessing information in your app's SQLite
                  databases.</p>
            </div>           
            
            <ul>
               <li>SQLite, open source flat file relational DB</li>
               <li>Ideal for embedded applications; No DBMS or scalability</li>
               <li>
                 SQLite included in Android standard library
               </li>
               <li>Android helper classes to open/read/write in device's <em>sandbox</em></li>
               <li>
                 <details>
                   <summary>Schema, 3<sup>rd</sup> NF</summary>
<pre class="panel"><code class="prettyprint">package database;
import java.util.Date;
import java.util.UUID;
public class TodoDbSchema {
   public static final class TodoTable {
      public static final String NAME = "todos";
      public static final class Cols {
         public static final String UUID = "uuid";
         public static final  String TITLE = "title";
         public static final  String DETAIL = "detail";
         public static final  String DATE = "date";
         public static final  String IS_COMPLETE = "isComplete";
      }
   }
}</code></pre>
<pre class="panel"><code class="prettyprint">/* Columns can be refered to in a Java safe way */
TodoDbSchema.Cols.TITLE</code></pre>
                 </details>
               </li>
               <li>
                 <details>
                   <summary>Building a DB steps:</summary>
                   <ul>
                     <li>(!Exist DB) Create DB (and Seed data)</li>
                     <li>Else open DB (and check version)</li>
                   </ul>
                   <details>
                     <summary>Android <code class="prettyprint">SQLiteOpenHelper</code> class handles building a DB</summary>
<pre class="panel"><code class="prettyprint">package database;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import database.TodoDbSchema.TodoTable;

public class TodoBaseHelper extends SQLiteOpenHelper {
   private static final int VERSION = 1;
   private static final String DATABASE_NAME = "todo.db";

   public TodoBaseHelper(Context context) {
      super(context, DATABASE_NAME, null, VERSION);
   }
   @Override
   public void onCreate(SQLiteDatabase db) {
      db.execSQL("create table " + TodoTable.NAME + "(" +
         TodoTable.Cols.UUID + ", " +
         TodoTable.Cols.TITLE + ", " +
         TodoTable.Cols.DETAIL + ", " +
         TodoTable.Cols.DATE + ", " +
         TodoTable.Cols.IS_COMPLETE + ")"
      );
   }
   @Override
   public void onUpgrade(SQLiteDatabase db, 
    int oldVersion, int newVersion) {
   }
}</code></pre>            
                   </details>
                   <details>
                     <summary>Example Model using <code class="prettyprint">SQLiteOpenHelper</code> to create a DB</summary>
                     <p></p>
<pre class="panel"><code class="prettyprint">public class TodoModel {
   private static TodoModel sTodoModel;
   private static Context mContext;
   private SQLiteDatabase mDatabase;

   public static TodoModel get(Context context) {
      mContext = context.getApplicationContext();
      if (sTodoModel == null) {
         sTodoModel = new TodoModel(context);
      }
      return sTodoModel;
   }

   private TodoModel(Context context){
      mContext = context.getApplicationContext();
      mDatabase = new TodoBaseHelper(mContext)
            .getWritableDatabase(); 
      }
    /* insert seed test data */
   }
&vellip;  
</code></pre>            
                   </details>

                   <details>
                     <summary>CRUD Operations</summary>
                     <ul>
                       <li>
                         <details>
                           <summary>CRUD uses <code class="prettyprint">ContentValues</code> class to store <em>key/value</em> maps</summary>
<pre class="panel"><code class="prettyprint">/* Model static method for ContentValues */
private static ContentValues getContentValues(Todo todo) {
   ContentValues contentValues = new ContentValues();
   contentValues.put(
      TodoDbSchema.TodoTable.Cols.UUID, todo.getId().toString());
   contentValues.put(
      TodoDbSchema.TodoTable.Cols.TITLE, todo.getTitle());
   contentValues.put(
      TodoDbSchema.TodoTable.Cols.DETAIL, todo.getDetail());
   contentValues.put(
      TodoDbSchema.TodoTable.Cols.DATE, todo.getDate().getTime());
   contentValues.put(
      TodoDbSchema.TodoTable.Cols.IS_COMPLETE, todo.isComplete()==1 ? 1 : 0);

   return contentValues;
} 
</code></pre> 
                         </details>
                       </li>
                       <li>
                         <details>
                           <summary>Create or Write to the DB</summary>
<pre class="panel"><code class="prettyprint">public void addTodo(Todo todo){
   ContentValues contentValues = getContentValues(todo);
   
   /* contentValues = null raises an exception except
      when 2nd parameter is null in which case a new row is inserted */
      
   mDatabase.insert(TodoDbSchema.TodoTable.NAME, null, contentValues);
}

</code></pre>                     
                         </details>
                       </li>
                       <li>
                         <details>
                           <summary>Update a record</summary>
<pre class="panel"><code class="prettyprint">public void updateTodo(Todo todo){
   String uuidString = todo.getId().toString();
   ContentValues contentValues = getContentValues(todo);
   
   /* stop sql injection, pass uuidString to new String
      so, it is treated as string rather than code */
   
   mDatabase.update(TodoDbSchema.TodoTable.NAME, contentValues,
      TodoDbSchema.TodoTable.Cols.UUID + " = ?",
      new String[] { uuidString });
}</code></pre>                     
                         </details>
                       </li>
                       <li>
                         <details>
                           <summary>Read a record</summary>
                           <ul>
                             <li>
                               <code class="prettyprint">SQLiteDatabase.query()</code> has many <em>overloads</em> 
                               corresponding to a SQL query <br />
                               <code class="prettyprint">SELECT columns FROM Table WHERE wherArgs GROUPBY, HAVING, ORDERBY, LIMIT </code>. 
                             </li>
                             <li>
                               <code class="prettyprint">SQLiteDatabase.query()</code> returns a <code class="prettyprint">cursor</code> object <br />
                               <code class="prettyprint">Cursor cursor = mDatabase.query(TodoDbSchema.TodoTable.NAME, &hellip; )</code>
                             </li>
                             <li>
                               <code class="prettyprint">Cursor</code> interface provides random read-write access to the result set returned by a database query.<br />
                               <code class="prettyprint">cursor.getColumnIndex(TodoDbSchema.TodoTable.Cols.TITLE));</code>
                             </li>
                             <li>
                               DRY by using <code class="prettyprint">CursorWrapper</code> to subclass <code class="prettyprint">Cursor</code><br />
                               <aside class="small">(CursorWrapper delegates all calls to the actual cursor object. The primary use for this class is to extend a cursor while overriding only a subset of its methods.)</aside>
<pre class="panel"><code class="prettyprint">public class TodoCursorWrapper extends CursorWrapper {

   public TodoCursorWrapper(Cursor cursor){
      super(cursor);
   }

   public Todo getTodo() {
      String uuidString = getString(
         getColumnIndex(TodoDbSchema.TodoTable.Cols.UUID));
      String title = getString(
         getColumnIndex(TodoDbSchema.TodoTable.Cols.TITLE));
      String detail = getString(
         getColumnIndex(TodoDbSchema.TodoTable.Cols.DETAIL));
      Long date = getLong(
         getColumnIndex(TodoDbSchema.TodoTable.Cols.DATE));
      int isComplete = getInt(
         getColumnIndex(TodoDbSchema.TodoTable.Cols.IS_COMPLETE));

      Todo todo = new Todo(UUID.fromString(uuidString));
      todo.setTitle(title);
      todo.setDetail(detail);
      todo.setDate(new Date(date));
      todo.setComplete(isComplete);

      return todo;
   }
}</code></pre>
                             </li>

                             <li>
                               Generic <code class="prettyprint">select</code> (Read) using <code class="prettyprint">TodoCursorWrapper</code>
<pre class="panel"><code class="prettyprint">private TodoCursorWrapper queryTodoList(
   String whereClause, String[] whereArgs) {

   Cursor cursor = mDatabase.query(
      TodoDbSchema.TodoTable.NAME, null, whereClause, whereArgs, &hellip;
   );

   return new TodoCursorWrapper(cursor);
}

</code></pre>
                             </li>
                             <li>
                               <details>
                                 <summary>Read a Todo using <code class="prettyprint">TodoCursorWrapper</code></summary>
<pre class="panel"><code class="prettyprint">public Todo getTodo(UUID id){

   TodoCursorWrapper cursor = queryTodoList(
      TodoDbSchema.TodoTable.Cols.UUID + " = ?",
      new String[] {id.toString() }
   );

   try {
   
      if (cursor.getCount() == 0) {
         return null;
      }
      
      cursor.moveToFirst();
      return cursor.getTodo();
         
      } finally {
         cursor.close();
      }
}</code></pre>                        
                               </details>

                             </li>
                             <li>
                               <details>
                                 <summary>Read a list of Todos using <code class="prettyprint">TodoCursorWrapper</code></summary>
<pre class="panel"><code class="prettyprint">public List&lt;Todo&gt; getTodoList() {

   List&lt;Todo&gt; todoList = new ArrayList&lt;&gt;();

   TodoCursorWrapper cursor = queryTodoList(null, null);
   try {
      cursor.moveToFirst();
      while (!cursor.isAfterLast()) {
          todoList.add(cursor.getTodo());
          cursor.moveToNext();
      }
   } finally {
      cursor.close();
   }

   return todoList;
}</code></pre>                        
                               </details>
                             </li>
                           </ul>
                         </details>
                       </li>
                     </ul>
                   </details>
                 </details>
               </li>
               <li>
                  <details>
                     <summary>Debugging</summary>
                     <ul>
                        <li>
                           Changes in DDL should lead to the <code class="prettyprint">SQLiteOpenHelper</code> change the version number and update the tables in the <code class="prettyprint">onUpgrade</code> method
                        </li>
                        <li>
                           Or, destroy the database by deleting the app on the device and start again. <br />
                           <div class="small">(For a new app, <code class="prettyprint">SQLiteOpenHelper.onCreate()</code> is called and a new database instance is created).</div>
                        </li>
                        <li>
                           Use a breakpoint and examine the detail of <code class="prettyprint">SQL</code> statement for correct syntax.
                        </li>
                     </ul>
                  </details>
               </li>
             </ul>
         
         </details>
         
         <h3>Room Persistence Library</h3>
         
         <p>
            <q cite="https://developer.android.com/topic/libraries/architecture/room">The Room persistence library provides an abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite.</q>
         </p>
         <ul>
            <li>
               <a target="_blank" href="https://github.com/ebbi/TodoMVVM">TodoMVVM lab exercise</a>
            </li>
            <li>
               <a target="_blank" href="https://developer.android.com/topic/libraries/architecture/room">Room additional resouces including Samples and Codelabs</a>
            </li>
         </ul>
         
      </article>  
    
      <article id="todo-mvvm" class="lab-sheet panel">      
         <h2>A <em>Todo Persistence</em> App &mdash; MVVM</h2>
         
         <p>
            The code for this exercise can be found at: <a target="_blank" href="https://github.com/ebbi/TodoMVVM">https://github.com/ebbi/TodoMVVM</a>
         </p>
         
         <h3>Model&dash;View&dash;View&dash;Model (MVVM)</h3>
         
         <p>MVVM is the Android recommended architecture.  This lab exercise is an MVVM implementation of the Todo app.</p>         
                  
         <details class="panel">
            <summary>MVVM overview</summary>
   
            <p>
               MVVM is the Android recommended app architecture built arround a set of Architecture Components designed to work together.  The components are lifecycle aware and make code design, implementation and maintenance much easier to manage.
            </p>
                
            <div class="width-full panel">
            <span data-class="image width-three-quarter" data-image="todo app uml sequence diagram" data-local-src="assets/android-mvvm.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fandroid-mvvm.png?v=1573685057510"></span>
         
            <details class="panel">
               <summary>Overview of MVVM components implemented in this exercise</summary>
               <dl>
                  <dt><code class="prettyprint">Entity</code></dt>
                  <dd>Annotated class that describes a db table used with <code class="prettyprint">Room</code> ORM class</dd>

                  <dt><code class="prettyprint">SQLite</code> database</dt>
                  <dd>Created and maintained with <code class="prettyprint">Room</code> persistence library on its own thread</dd>

                  <dt><code class="prettyprint">DAO</code></dt>
                  <dd>Data Access Object, provides object methods to <code class="prettyprint">SQL</code> queries</dd>

                  <dt><code class="prettyprint">Room</code> database</dt>
                  <dd>Uses the <code class="prettyprint">DAO</code> to issue queries to the <code class="prettyprint">SQLite</code> database ( and thankfully, hides <code class="prettyprint">SQLiteOpenHelper</code>)</dd>

                  <dt><code class="prettyprint">Repository</code></dt>
                  <dd>Provides APIs for UI to communicate with the data layer.  Important, Single Source Of Truth (SSOT) pattern, i.e. every data element for the app is stored only once.  <code class="prettyprint">Repository</code> is also used to manage multiple data sources.</dd>

                  <dt><code class="prettyprint">ViewModel</code></dt>
                  <dd>A communication object between the data <code class="prettyprint">Repository</code> and the UI. <code class="prettyprint">ViewModel</code> instances survive <code class="prettyprint">Activity</code>/<code class="prettyprint">Fragment</code> recreation.</dd>

                  <dt><code class="prettyprint">LiveData</code></dt>
                  <dd>An observable data holder class, hence it always holds/caches the latest data and notifies its observers when data changes.  UI components observe relevant data as <code class="prettyprint">LiveData</code> is aware of the relevant lifecycle status changes while observing.</dd>         

               <dt>Fragments</dt>
                  <dd>UI is built dynamically with <code class="prettyprint">Fragment</code> transactions and separation of concerns is achieved with <code class="prettyprint">ViewModel</code> and <code class="prettyprint">LiveData</code> implementing the observer pattern.</dd>

            </dl>
            </details>
            
         </div> 
                 
            <p>
               <code class="prettyprint">ViewModel</code> allows data to survive across process rather than <code class="prettyprint">Activity</code> lifecycle, hence, configuration changes (such as screen rotations) are easier to manage.
            </p>
            <p>
               <code class="prettyprint">LiveData</code> implements the observer pattern and is an observable data-holder class and a lifecycle aware component.  UI Controllers can observe relevant data and <code class="prettyprint">LiveData</code> can notify them of data changes.  This allows for views to be built only when actual changes to data occurs.
            </p>
            <p>
               The <code class="prettyprint">Room</code> persistence library provides ORM and makes it easy to build a local cache layer, improving performance and the user experience with less reliance on data pulled from the network.
            </p>
  
         </details> 

         <details class="panel">
            <summary>MVVM lab sheet</summary>
 
            <details class="panel">
               <summary>Create a new project</summary>           
               <pre class="slide-small">Create a new empty project named, TodoMVVM
<span class="slide-small">API 27: Android 8.1 (Oreo)
Virtual Device: Nexus 5X API 27</span></pre>
            </details>
             
            <details class="panel">
               <summary>Gradle update for new component libraries</summary> 
               <p>
                  Edit build.gradle (Project: TodoMVVM) and add:
               </p>
               <pre class="slide-small"><code class="prettyprint">ext {
 roomVersion = '2.2.1'
 archLifecycleVersion = '2.2.0-rc01'
 coreTestingVersion = '2.1.0'
 materialVersion = '1.0.0'
}</code></pre>
               <p>
                  Edit build.gradle (Module: TodoMVVM) for dependencies<br /><span class="slide-small">(insert at the end of the dependencies block, before the } )</span>
               </p>
               <pre class="slide-small"><code class="prettyprint"><span class="slide-small">// Room components
 implementation "androidx.room:room-runtime:$rootProject.roomVersion"
 annotationProcessor "androidx.room:room-compiler:$rootProject.roomVersion"
 androidTestImplementation "androidx.room:room-testing:$rootProject.roomVersion"

// Lifecycle components
 implementation "androidx.lifecycle:lifecycle-extensions:$rootProject.archLifecycleVersion"
 annotationProcessor "androidx.lifecycle:lifecycle-compiler:$rootProject.archLifecycleVersion"

// UI
 implementation "com.google.android.material:material:$rootProject.materialVersion"

// Testing
 androidTestImplementation "androidx.arch.core:core-testing:$rootProject.coreTestingVersion"</span>
</code></pre>
            </details>
            
            <details class="panel">
               <summary>Sync dependencies</summary> 
               <p>
                  Sync Now (in Android Studio, top right corner)<br />
                  <span class="caution">Do not proceed unless the Sync completes without errors!</span>
               </p>
            </details>
             
            <details class="panel">
               <summary><code class="prettyprint">Entity</code></summary> 
               <p>
                  An <code class="prettyprint">entity</code> is an annotated class that describes a database table. Room uses the properties of this entity class to create columns in the database table.  The same <code class="prettyprint">entity</code> is used to instantiate objects from rows of data in the database.
               </p>
               <p>Create a new class file named <code class="prettyprint">Todo</code> and insert the following code:</p>
               
               <details>
                  <summary><code class="prettyprint">Todo</code> entity</summary>
                  <pre class="slide-small"><code class="prettyprint">import androidx.annotation.NonNull;
import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.PrimaryKey;
<span class="slide-small">
/**
 * A basic class representing a two-column todo_database table.
 *
 * @ Entity - annotate the class as an entity and supply a table name if not class name.
 * @ PrimaryKey - identify the primary key.
 * @ ColumnInfo - supply the column name if it is different from the variable name.
 *
 * See the documentation for the full set of annotations.
 * https://developer.android.com/topic/libraries/architecture/room.html
 */
</span>
@Entity(tableName = "todo_table")
public class Todo {

    @PrimaryKey
    @NonNull
    @ColumnInfo(name = "title")
    private String mTitle;
    
    private String mDetail;

    public Todo(@NonNull String title) {
        this.mTitle = title;
    }
    public String getTitle() {
        return this.mTitle;
    }

    String getDetail() {
        return this.mDetail;
    }
    void setDetail(String mDetail) {
        this.mDetail = mDetail;
    }

}</code></pre>              
               </details>
               
               <p>The class is a POJO with a set of attributes representing the database columns and getter, setter methods.  Note the annotations identify how each part of this class relates to an entry in the database.  <code class="prettyprint">Room</code> uses this information to generate code.  </p>
               
               <details>
                  <summary>Here is a brief explanation of each of the annotations</summary>             
                  <dl>
                  <dt><code class="prettyprint">@Entity(tableName = "todo_table")</code></dt>
                  <dd>Each <code class="prettyprint">@Entity</code> class represents a SQLite table. The parameter <code class="prettyprint">tablename</code> can optionally set a different name than the default name of the class.</dd>

                  <dt><code class="prettyprint">@PrimaryKey</code></dt>
                  <dd>Every entity has a primary key. In this case, simply each todo <code class="prettyprint">tittle</code> is the primary key.</dd>

                  <dt><code class="prettyprint">@NonNull</code></dt>
                  <dd>Denotes that a parameter, field, or method return value can never be null.</dd>
                  
                  <dt><code class="prettyprint">@ColumnInfo(name = "title")</code></dt>
                  <dd>Specify the name of the column in the table if you want it to be different from the name of the member variable.</dd>
                  
                  <dt>Other minimum constraints</dt>
                  <dd>Every field that is stored in the database needs to be either public or have a <em>getter</em> method. This example provides a <code class="prettyprint">getTitle()</code> and <code class="prettyprint">getDetail()</code> methods.</dd>
                  
               </dl>
               </details>
              
               <p>The complete list of annotations can be found in the <a target="_blank" href="https://developer.android.com/reference/androidx/room/package-summary.html">Room package summary reference</a>. And see <a target="_blank" href="https://developer.android.com/training/data-storage/room/defining-data.html">Defining data using Room entities</a> for further examples uses of annotations.</p>
            
            </details>


            
            
            
            <pre class="slide-small">
API and dependancies are now setup, Run to make sure there are no errors

Create a git branch, entity
add code for Todo
Git checkout master and merge entity branch

Create a git branch, dao
add code for TodoDao
Git checkout master and merge entity branch

Create a git branch, room
add code for TodoRoomDatabase
Git checkout master and merge room branch              

            </pre>

         </details>

         <div class="width-three-quarter panel">
            <span data-class="image width-full" data-image="Android Room View Model" data-local-src="assets/loading_data_view_model.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Floading_data_view_model.png?v=1573685177028"></span>
         </div>


         <h3>Room Persistence Library</h3>
         
         <p>
            <q cite="https://developer.android.com/topic/libraries/architecture/room">The Room persistence library provides an abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite.</q>
         </p>
         <ul>
            <li>
               <a target="_blank" href="https://github.com/ebbi/TodoMVVM">TodoMVVM lab exercise</a>
            </li>
            <li>
               <a target="_blank" href="https://developer.android.com/topic/libraries/architecture/room">Room additional resouces including Samples and Codelabs</a>
            </li>
         </ul>
          <div class="width-full panel">
            <span data-class="image width-three-quarter" data-image="Android MVVM architecture" data-local-src="assets/android-final-architecture.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fandroid-final-architecture.png?v=1573684803675"></span>
         </div>        
      </article>           
      
      <article id="java-review" class="lab-sheet panel">
         <h2>Java Review</h2>
         
         <details>
            <summary>Start here!</summary>
            <p>
               The Introduction to Programming in Java is a good concise reference. See the lecture notes and complete the exercises. This is a minimum needed before attempting to code in any framework such as Android.
            </p>              
            <details>
               <summary>can you explain <code class="prettyprint">static</code> types and methods?</summary>

               <pre class="slide-small">if (true) {
   continue to lab exercises 
} else {
   Read <a target="_blank" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-092-introduction-to-programming-in-java-january-iap-2010/lecture-notes/">Introduction to Programming in Java &dash; from MIT</a>
   Watch <a target="_blank" href="https://www.youtube.com/watch?v=ckYwv4_Qtmo">Java Memory Management</a>, video from Virtual Pair Programmers   
   <a target="_blank" href="http://www.greenteapress.com/thinkjava5/index.html">Think Java</a> is a good online reference book 
   Use the android &amp; stackoverflow search in the header
}</pre>

            </details>
         </details>
         
         <details>
            <summary>Threads and Synchronisation</summary>
            <ul>
               <li>
                  <code class="prettyprint">Thread</code> is a sequence of instructions that can be managed <em>independantly</em> by a scheduler
               </li>
               <li>
                  <em>Independently</em> scheduling threads allows for one thread, for example, downloading data while another thread runs the view of an app
               </li>
               <li>
                  <em>Thread safe</em> classes and <em>synchronisation</em> becomes important
               </li>
               <li>
                  <details>
                     <summary><code class="prettyprint">Thread</code>s a Hello World example</summary>
                   
                     <details>
                        <summary><code class="prettyprint">Runnable Interface</code></summary>
                        <ul><li>Single method, <code class="prettyprint">public void</code> with no arguments<br />
                           <code class="prettyprint">public void run()</code></li></ul>
                     </details>
                     <details>
                        <summary>Hello (on a <code class="prettyprint">Thread</code>) World (on another <code class="prettyprint">Thread</code>)</summary>
                        <pre><code class="prettyprint">public class ThreadDemo {
   public static void main(String args[]) {
      System.out.println("Hello (on a thread) World (on another thread)!");
         
      /* anonymous class implementing Runnable interface run() 
            method passed to Runnable */      
      Runnable objHello = new Runnable() {
         public void run() {
            for(int i=1; i&lt;=5; i++) {
               System.out.println("Hello ");
               /* do some nice processing! */
               try { Thread.sleep(1000); } catch(Exception e){}
            }
         }                  
      };
      
      Runnable objWorld = new Runnable() {
         /* anonymous class with run() method passed to Runnable */
         public void run() {
            for(int i=1; i&lt;=5; i++) {
               System.out.println("World");
               try { Thread.sleep(3000); } catch(Exception e){}
            }
         }                  
      };
      
      Thread threadHello = new Thread(objHello);
      Thread threadWorld = new Thread(objWorld);
      
      threadHello.start();
      try { Thread.sleep(1000); } catch(Exception e){}
      threadWorld.start();
      
//      System.out.println(threadHello.isAlive());
//      try { threadHello.sleep(1000); } catch(Exception e){}
      
      /* .join will force the calling thread to wait until it complete */
//      try { threadHello.join(); } catch(Exception e){}
//      try { threadWorld.join(); } catch(Exception e){}
      
      /* check if method is alive after join */
      System.out.println(threadHello.getName() + " " + threadHello.isAlive());
      System.out.println(threadWorld.getName() + " " +  threadWorld.isAlive());
      
      System.out.println("Time for poetry");
      
   }
}</code></pre>
                     </details>    

                   
                  </details>                 
               </li>
               <li>
                  <details>
                     <summary><code class="prettyprint">Thread</code>s a Hello World Synchronised example</summary>
                                       
                     <details>
                        <summary><code class="prettyprint">Runnable Interface</code></summary>
                        <ul><li>Single method, <code class="prettyprint">public void</code> with no arguments<br />
                           <code class="prettyprint">public void run()</code></li></ul>
                     </details>
                     
                     <details>
                        <summary>DoWork class to simulate load in a <code class="prettyprint">Thread</code></summary>
                        <pre><code class="prettyprint">class DoWork {
   /* Class to run in a thread
      Simulate the load by the number of calls to increment */
   int count;

   /* needs to be synchronized and made thread safe */
   public synchronized void increment() {
      count++;  // increment is more than one operation!
   }
}</code></pre>
                     </details>    
                     
                     <details>
                        <summary>Synchronised Hello World</summary>
                        <pre><code class="prettyprint">public class SyncDemo { 
   public static void main(String args[]) {
      System.out.println("Synchronised value from both Hello and World threads");
      
      DoWork doWork = new DoWork();

      /* annoymous class implementing Runnable interface run() 
         method passed to Runnable */   
      Runnable objHello = new Runnable() {
         
         public void run() {           
            for(int i=1; i&lt;=1000; i++) {
               doWork.increment();
            }
            
            System.out.println( doWork.count + " Hello "); 
         }                  
      };
      
      Runnable objWorld = new Runnable() {
         public void run() {
            
            for(int i=1; i&lt;=1000; i++) {
               doWork.increment();
            }
            
            System.out.println( doWork.count + " World ");           
         }                  
      };
      
      Thread threadHello = new Thread(objHello);
      Thread threadWorld = new Thread(objWorld);
      
      threadHello.start();
      threadWorld.start();

      /* .join will force the calling thread to wait until it complete */
//      try { threadHello.join(); } catch(Exception e){}
//      try { threadWorld.join(); } catch(Exception e){}
      
      System.out.println(doWork.count + " reminders for poetry");
      
   }
}</code></pre>
                     </details>                    
                  </details>                 
               </li>
            </ul>
         </details>
         
         
      </article>
  
      <article id="git-repo-setup" class="lab-sheet panel">

            <h2>Git Overview &nbsp;</h2>
            
         <p>
            It is worth while investing time to know git; version control and collaboration is essential.
         </p>

         <details>
            <summary>Setup a Github or Bitbucket repository</summary>
            <p>
               <strong>Use an existing account to signin OR </strong> create a new account on <a target="_blank" href="https://github.com/"> Github</a> or <a target="_blank" href="https://bitbucket.org/account/signup/">Bitbucket</a>. <br />
               (Note: <em>You must complete the account creation by email verification.</em>)
            </p>
            <p>
               Once signed in to the remote repo (Github or Bitbucket), creat a new repository. (for the <kbd>Repository name</kbd>, use the project name) and leave the rest as default.
            </p>
            <p>
               Once the remote repository is created, instructions to add this remote repository (or origin) to the local git repository is displayed.
            </p>

            <pre class="slide-small"><code class="prettyprint">echo "# <em>insert name of the project"</em> &gt;&gt; README.md
git init
git add .
git commit -am "first commit"
git remote add origin (<em>insert the repo address</em>)
git push -u origin master</code>

<em>Note: repo address is similar to: 
   https://github.com/you!/your_project_name!.git</em>
</pre>
         </details>

         <details>
            <summary>An example workflow</summary>
            <p>
               A typical workflow to <em>create a branch, try changes, and either delete or merge the changes</em>
            </p>
            <p>
               Create a new empty folder. Use a terminal and change directory (cd) to the folder.
               Edit a test file with a message, "Hello World" and save it.
            </p>

            <pre class="slide-small"><code class="prettyprint">git init
git status
git add .
git commit -am "initial setup"
git status
git log

git branch xyz
git checkout xyz
git status
git log </code></pre>

            <p>
               Edit the test file and add a message "Happy World!" and also duplicate the file
            </p>

            <p>
               To reverse the changes:
            </p>
            <pre class="slide-small"><code class="prettyprint">git add .
git reset --hard HEAD

git status</code></pre>

            <p>
               Note the change have been reversed.
            </p>

            <p>
               To commit the changes and merge it to the master branch:
            </p>
            <pre class="slide-small"><code class="prettyprint">git status
git add .
git commit -am "added happy and duplicated test file"

git checkout master
git merge xyz

git status
git log </code></pre>

            <hr>
            <p>
               Note, <code class="prettyprint">status</code> and <code class="prettyprint">log</code> are for information only. <br>
               <code class="prettyprint">git branch</code>  lists all branches <br>
               <code class="prettyprint">git push origin master</code>  copies the current master to the remote repo
            </p>

         </details>

         <ul>
            <li>
               <a target="_blank" href="https://youtu.be/SWYqp7iY_Tc">Video guide to git</a>
            </li>
            <li>
               <a target="_blank" href="https://www.learnenough.com/git-tutorial">Git tutorial - Hartl</a>
            </li>
         </ul>

      </article>

      <article id="java-review-slide" class="slide panel">
         <h2>Prerequisites for Mobile Apps</h2>
         <details>
            <summary>Java Language and Memory Management</summary>
            <ul>
               <li>
                  <a target="_blank" href="https://www.youtube.com/watch?v=ckYwv4_Qtmo">practical look at the stack and heap</a>
               </li>
               <li>
                  <a target="_blank" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-092-introduction-to-programming-in-java-january-iap-2010/lecture-notes/">Introduction to Programming in Java &dash; from MIT</a>
               </li>
            </ul>

         </details>

      </article>

      <article id="android-platform-slide" class="slide panel">
         <h2>Android Platform</h2>
         <ul>
            <li>
               Where is the <code class="prettyprint">main</code> thread? 
            </li>
            <li>
               <code class="prettyprint">ActivityManager</code> in the OS is in charge, not You!
            </li>
            <li>
               <code class="prettyprint">Activity</code> class is the entry point for UI
            </li>

            <li class="list-style-none">

               <details>
                  <summary class="left-margin-none">A walk-through <code class="prettyprint">hello world</code></summary>

                  <ul class="list-style-none left-margin-none">
                     <li>
                        <details>
                           <summary><code class="prettyprint">manifest</code> file</summary>
                           <pre class="slide-small"><code class="prettyprint">&lt;activity android:name=".HelloWorld"&gt;
   &lt;intent-filter&gt;
      &lt;action android:name="android.intent.action.MAIN"/&gt;
      &lt;category android:name="android.intent.category.LAUNCHER"/&gt;
   &lt;/intent-filter&gt;
&lt;/activity&gt;</code></pre>
                        </details>
                     </li>

                     <li>
                        <details>
                           <summary><code class="prettyprint">HelloWorldActivity</code> </summary>
                           <pre class="slide-small"><code class="prettyprint">public class HelloWorldActivity extends AppCompatActivity {

   @Override
   protected void onCreate(Bundle savedInstanceState) {

     /* call the super class onCreate to complete 
        the creation of Activity, such as the view hierarchy */
     super.onCreate(savedInstanceState);

     /* set the user interface layout for this Activity */
     setContentView(R.layout.activity_helloWorld);

   }
}
</code></pre>
                        </details>
                     </li>

                     <li>
                        <details>
                           <summary>Resources &amp; <code class="prettyprint">view</code> definition</summary>

                           <pre class="slide-small"><code class="prettyprint">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;android.support.constraint.ConstraintLayout 
   &hellip;
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".HelloWorldActivity"&gt;

   &lt;TextView
      android:id="@+id/textViewMessage"   
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/message_text"
      app:layout_constraintBottom_toBottomOf="parent"
      &hellip; /&gt;

&lt;/android.support.constraint.ConstraintLayout&gt;

and a file strings.xml in the res folder defines:
&lt;resources&gt;
    &lt;string name="message_text"&gt;Hello World&lt;/string&gt;
    &hellip;
&lt;resources&gt;
</code></pre>

                        </details>
                     </li>

                  </ul>

               </details>

            </li>

         </ul>

         <details>
            <summary>Questions &amp; Discussion</summary>

            <ol>
               <li>
                  How many steps are there in the <code class="prettyprint">Hello World</code> walk-through?
               </li>
               <li>
                  Where is the main thread defined?
               </li>
               <li>
                  How are views defined?
               </li>
               <li>
                  What is <code class="prettyprint">@override</code> and <code class="prettyprint">callback</code> function?
               </li>
            </ol>

         </details>

      </article>

      <article id="activity-intent-slide" class="slide panel">
         <h2><code class="prettyprint">Activity</code> and <code class="prettyprint">Intent</code></h2>
         <details class="panel">
            <summary><code class="prettyprint">Activity</code> and <code class="prettyprint">Intent</code></summary>
            <div class="slide-article panel">
               <ul>
                  <li>
                     <code class="prettyprint">Activity</code> &mdash; a single screen in an app
                  </li>
                  <li>
                     <code class="prettyprint">Intent</code> &mdash; a message object to start an <code class="prettyprint">activity</code>
                  </li>
                  <li>
                     <code class="prettyprint">Activity</code> and <code class="prettyprint">Intent</code> communicate via the OS <code class="prettyprint">ActivityManager</code>
                  </li>
                  <li>
                     Pattern allows for <code class="prettyprint">Activity</code> in one App to use <code class="prettyprint">Activity</code> in another App
                  </li>
               </ul>
            </div>
         </details>

         <details class="panel">
            <summary><code class="prettyprint">Activity</code></summary>

            <div class="slide-article panel">
               <details>
                  <summary>
                     Creating an <code class="prettyprint">Activity</code>
                  </summary>
                  <ul>
                     <li>
                        initialise <code class="prettyprint">Activity</code> in <code class="prettyprint">onCreate()</code> callback
                        <ul>
                           <li>
                              <pre class="slide-small"><code class="prettyprint">setContentView( findViewById( R.layout.activity_example )</code></pre>
                           </li>
                           <li>
                              <pre class="slide-small"><code class="prettyprint">onSaveInstanceState( Bundle )</code></pre>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <code class="prettyprint">onPause()</code> called when user leaves the <code class="prettyprint">activity</code> &mdash; serialise
                     </li>
                     <li>
                        Declare the <code class="prettyprint">Activity</code> in <code class="prettyprint">AndroidManifest.xml</code>
                     </li>
                  </ul>
               </details>

               <details>
                  <summary>
                     <code class="prettyprint">Activity</code> state, persistence, &amp; lifecycle
                  </summary>
                  <ul>
                     <li class="list-style-none">
                        <details>
                           <summary class="left-margin-none"><code class="prettyprint">Activity</code> has four states</summary>
                           <ul>
                              <li>
                                 <code class="prettyprint">active</code> (or <em>running</em> at the top of the activity stack)
                              </li>
                              <li>
                                 <code class="prettyprint">paused</code> &mdash; alive in memory, visible, lost focus
                              </li>
                              <li>
                                 <code class="prettyprint">stopped</code> &mdash; obscured by another activity, alive im memory, not visible
                              </li>
                              <li>
                                 <code class="prettyprint">paused</code> or <code class="prettyprint">stopped</code> &mdash; may lead to <code class="prettyprint">destroyed</code> &amp; <code class="prettyprint">restarted</code> to previous state
                              </li>
                           </ul>

                           <div class="asset">
                              <span data-class="image width-three-quarter" data-image="Android activity lifecycle" data-local-src="assets/activity_lifecycle.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Factivity_lifecycle.png?1549811400463"></span>
                           </div>

                           <ul>

                           </ul>

                        </details>

                        <details>
                           <summary class="left-margin-none">Monitoring <code class="prettyprint">Activity</code> &dash; three key loops</summary>
                           <ul>
                              <li>
                                 <em>entire lifetime</em> between <code class="prettyprint">onCreate</code> to <code class="prettyprint">onDestroy</code>
                              </li>
                              <li>
                                 <em>visible lifetime</em> between <code class="prettyprint">onStart</code> to <code class="prettyprint">onStop</code>
                              </li>
                              <li>
                                 <em>foreground lifetime</em> between <code class="prettyprint">onResume</code> to <code class="prettyprint">onPause</code>
                              </li>

                           </ul>

                           <div class="asset">
                              <span data-class="image width-three-quarter" data-image="ANdroid basic lifecycle" data-local-src="assets/basic-lifecycle.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fbasic-lifecycle.png?1549746688879"></span>
                           </div>
                           <details>
                              <summary>Example Callbacks</summary>
                              <p>
                                 Source code: <a target="_blank" href="https://github.com/ebbi/helloToast">https://github.com/ebbi/helloToast</a>
                              </p>
                              <pre class="slide-small"><code class="prettyprint">@Override
protected void onCreate(Bundle savedInstanceState) {
...
  Log.d(LOG_TAG, "-------");
  Log.d(LOG_TAG, "onCreate");
...
}
                           
@Override
public void onSaveInstanceState(Bundle outState) {
  Log.d(LOG_TAG, "onSaveInstanceState");
...
}

@Override
public void onStart(){
  super.onStart();
  Log.d(LOG_TAG, "onStart");
}

@Override
protected void onPause() {
  super.onPause();
  Log.d(LOG_TAG, "onPause");
}

@Override
protected void onRestart() {
  super.onRestart();
  Log.d(LOG_TAG, "onRestart");
}

@Override
protected void onResume() {
  super.onResume();
  Log.d(LOG_TAG, "onResume");
}

@Override
protected void onStop() {
  super.onStop();
  Log.d(LOG_TAG, "onStop");
}

@Override
protected void onDestroy() {
  super.onDestroy();
  Log.d(LOG_TAG, "onDestroy");
}</code></pre>
                           </details>
                        </details>

                        <details>
                           <summary class="left-margin-none">lifecycle &amp; Saving Persistent State</summary>
                           <ul>
                              <li>
                                 Document type data (typically in SQLite)
                              </li>
                              <li>
                                 <code class="prettyprint">Bundle</code> <em>key, value</em> pairs
                              </li>
                           </ul>
                           <details>
                              <summary>Example Persistence</summary>
                              <p>
                                 Source code: <a target="_blank" href="https://github.com/ebbi/helloToast">https://github.com/ebbi/helloToast</a>
                              </p>
                              <pre class="slide-small"><code class="prettyprint">@Override
protected void onCreate(Bundle savedInstanceState) {
   ...
  // Restore the state.
  if (savedInstanceState != null) {
      mCount = savedInstanceState.getInt("count");
      mShowCount.setText(String.valueOf(mCount));
  }
}
                           
@Override
public void onSaveInstanceState(Bundle outState) {
  super.onSaveInstanceState(outState);
  outState.putInt("count", mCount);
}</code></pre>
                           </details>
                        </details>

                        <details>
                           <summary class="left-margin-none"><code class="prettyprint">Lifecycle</code> class &amp; observer pattern</summary>
                           <ul>
                              <li>
                                 <code class="prettyprint">events</code> &mdash; enumeration from framework and <code class="prettyprint">lifecycle</code> class
                              </li>
                              <li>
                                 <code class="prettyprint">lifecycle</code> class events map to <code class="prettyprint">callback</code> methods
                              </li>
                              <li>
                                 Current state tracked by <code class="prettyprint">lifecycle</code> object
                              </li>
                              <li>
                                 <code class="prettyprint">LifecycleObserver</code> allows for <em>lifecycle-aware</em> components (<em>observer</em> pattern to monitor lifecycle status)
                              </li>
                           </ul>

                           <div class="asset">
                              <span data-class="image width-full" data-image="Adroid lifecycle states observer pattern collaboration diagram" data-local-src="assets/lifecycle-states.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Flifecycle-states.png?1549812267626"></span>
                           </div>
                        </details>

                     </li>
                  </ul>
               </details>

            </div>
         </details>

         <details class="panel">
            <summary><code class="prettyprint">Intent</code></summary>

            <div class="slide-article panel">
               <ul>
                  <li>
                     <a target="_blank" href="https://developer.android.com/reference/android/content/Intent.html"><code class="prettyprint">Intent</code></a> &mdash; messaging object to request an action from another&nbsp;<a target="_blank" href="https://developer.android.com/guide/components/fundamentals.html#Components">app component</a>
                  </li>
                  <li>
                     <code class="prettyprint">Intent</code> &mdash; a passive data structure that holds an abstract description of an operation to be performed
                  </li>

                  <li>
                     late runtime binding between the code in different applications
                  </li>
               </ul>

               <details>
                  <summary>How? <code class="prettyprint">Intent</code> constructors</summary>

                  <ul>
                     <li>
                        <code class="prettyprint">Intent()</code>
                     </li>
                     <li>
                        <code class="prettyprint">Intent( String action )</code>
                     </li>
                     <li>
                        <code class="prettyprint">Intent( String action, URI uri )</code>
                     </li>
                     <li>
                        <code class="prettyprint">Intent( Context context, Class&lt;?&gt;cls )</code>
                     </li>
                     <li>
                        <code class="prettyprint">Intent( String action, Context packageContext, Class&lt;?&gt;cls )</code>
                     </li>
                  </ul>
               </details>

               <details>
                  <summary><em>Explicit</em> &amp; <em>Implicit</em> <code class="prettyprint">Intent</code> examples</summary>
                  <ul>
                     <li>
                        <a target="_blank" href="https://developer.android.com/reference/android/content/Intent">Android predefined actions</a>
                     </li>
                     <li>
                        helper methods: <code class="prettyprint">setAction(), putExtra, addCategory(), &hellip; </code>
                     </li>
                  </ul>

                  <details>
                     <summary>Implicit <code class="prettyprint">Intent</code> &mdash; action is defined, target component is unkown</summary>
                     <a target="_blank" href="https://codelabs.developers.google.com/codelabs/android-training-activity-with-implicit-intent/#2">See Code &amp; Demo</a>

                     <pre class="slide-small"><code class="prettyprint">Intent intent = new Intent();
intent.setAction( Intent.ACTION_WEB_SEARCH );
intent.putExtra( SearchManager.QUERY,"search text" );</code></pre>

                     <pre class="slide-small"><code class="prettyprint">Intent browserIntent = new Intent( 
   Intent.ACTION_VIEW, 
   Uri.parse( "http://www.ecosia.com" )
);
browserIntent.addCategory( CATEGORY_BROWSABLE );</code></pre>

                  </details>

                  <details>
                     <summary>Explicit <code class="prettyprint">Intent</code> &mdash; target component is known</summary>

                     <pre class="slide-small"><code class="prettyprint">Intent intent = new Intent( 
   packageContext, ExampleActivity.class 
);
intent.putExtra( "EX1","example value" );
intent.putExtra( "EX2","example value" );</code></pre>
                     <span>late runtime binding between the code in different applications</span>
                  </details>

               </details>
            </div>
         </details>

         <details class="panel">
            <summary>Sequence Diagram &mdash; <em>Todo App</em></summary>
            <div class="slide-article panel">

               <div class="width-full">
                  <span data-class="image width-full" data-image="Android todo detail app uml sequence diagram" data-local-src="assets/todo_uml_sequence.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Ftodo_uml_sequence.png?1549406509581"></span>
               </div>
            </div>
         </details>

         <details class="panel">
            <summary>How to organise intents?</summary>

            <div class="slide-article panel">
               <details>
                  <summary>Where shoud an <code class="prettyprint">intent</code> be instantiated?</summary>
                  <p>
                     <em><strong>"from each according to their ability,
                           to each according to their need"</strong></em>
                  </p>
                  <div class="panel">
                     <ul>
                        <li>
                           Calling <code class="prettyprint">Activity</code> has the <code class="prettyprint">Intent</code> data
                        </li>
                        <li>
                           Called <code class="prettyprint">Activity</code> uses the <code class="prettyprint">Intent</code> data
                        </li>
                        <li>
                           <code class="prettyprint">static</code> method in called <code class="prettyprint">Activity</code>
                        </li>
                     </ul>

                     <pre class="slide-small"><code class="prettyprint">public static Intent newIntent(
      Context packageContext, int todoIndex){

   Intent intent = new Intent(
     packageContext, TodoDetailActivity.class);

   intent.putExtra(TODO_INDEX,todoIndex);

   return intent;
}</code></pre>

                     <p>
                        The calling activity:
                     </p>
                     <pre class="slide-small"><code class="prettyprint">Intent intent = 
   TodoDetailActivity.newIntent(TodoActivity.this, mTodoIndex);</code></pre>
                  </div>
               </details>

               <details>
                  <summary>Getting the <code class="prettyprint">Intent</code> result back</summary>
                  <div class="panel">
                     <p>
                        <code class="prettyprint">Activity</code> method <code class="prettyprint">startActivityForResult(Intent, requestCode)</code>
                     </p>

                     <pre class="slide-small"><code class="prettyprint">startActivityForResult(Intent intent, int requestCode);</code></pre>

                     <details class="nav-section-end">
                        <summary>Typical usage:</summary>
                        <pre class="slide-small"><code class="prettyprint">@Override
public void onClick(View v) {
  Intent intent = TodoDetailActivity.newIntent(
  TodoActivity.this, mTodoIndex);
  // requestCode = int constant for a single activity
  startActivityForResult(intent, IS_SUCCESS);
}</code></pre>
                     </details>
                  </div>
               </details>

               <details>
                  <summary>Setting a result</summary>
                  <p>
                     <code class="prettyprint">Activity</code> implement two method for setting results
                  </p>

                  <pre class="slide-small"><code class="prettyprint">setResult(int resultCode);</code></pre>
                  <pre class="slide-small"><code class="prettyprint">setResult(int resultCode, Intent intent);</code></pre>

                  <ul>
                     <li>
                        navigation logic &mdash; <code class="prettyprint">resultCode</code>, is <code class="prettyprint slide-small">Activity.RESULT_OK</code> or <code class="prettyprint slide-small">Activity.RESULT_CANCELED</code>
                     </li>
                     <li>
                        <code class="prettyprint">extras</code> in <code class="prettyprint">intent</code> for more data
                     </li>
                  </ul>

                  <details class="nav-section-end">
                     <summary>Typical usage:</summary>
                     <pre class="slide-small"><code class="prettyprint">Intent intent = new Intent();
intent.putExtra(IS_TODO_COMPLETE, isChecked);
setResult(RESULT_OK, intent);</code></pre>
                  </details>
               </details>

               <details>
                  <summary>Handling the result</summary>
                  <p>
                     Callback <code class="prettyprint">onActivityResult()</code> to retrieve any set result.
                  </p>

                  <details class="nav-section-end">
                     <summary>onActivityResult</summary>
                     <pre class="slide-small"><code class="prettyprint">@Override
protected void onActivityResult(
      int requestCode, int resultCode, Intent intent) {
  if (intent != null) {
    // data in intent from child activity
    boolean isTodoComplete = 
    intent.getBooleanExtra(IS_TODO_COMPLETE, false);
    &hellip; 
  } 
}</code></pre>
                  </details>
               </details>



            </div>
         </details>

      </article>

      <article id="events-listeners-slide" class="slide panel">
         <h2>Events and Listeners</h2>
         <ul>
            <li class="list-style-none left-margin-none">
               <details class="panel">
                  <summary>Events, Listeners &amp; Callbacks</summary>
                  <ul>
                     <li>
                        An event listener is an <code class="prettyprint">interface</code> in the <code class="prettyprint">View</code> class that contains a single callback method
                     </li>
                     <li>
                        Android maintains and even queue and implements <a target="_blank" href="https://developer.android.com/guide/topics/ui/ui-events">event listeners</a>
                     </li>
                     <li>
                        Event listener / Callback method:
                        <pre class="slide-small"><code class="prettyprint">View.OnClickListener             onClick()
View.OnLongClickListener         onLongClick()
View.OnFocusChangeListener       OnFocusChangeListener
View.OnKeyListener               OnKeyListener()
View.OnTouchListener             OnTouchListener()
View.OnCreateContextMenuListener OnCreateContextMenuListener()</code></pre>
                     </li>
                     <li>
                        UI <em>click</em> event, the listener, <code class="prettyprint">View.onClickListener</code> fires an event that results in the corresponding event handler, <code class="prettyprint">onClick</code> call back method being called.
                     </li>
                  </ul>
               </details>
            </li>
            <li class="list-style-none left-margin-none">
               <details class="panel">
                  <summary>Register event listeners with event handlers</summary>
                  <details>
                     <summary>Listener defined as an anonymous inner class</summary>
                     <ul>
                        <li>
                           Activity <code class="prettyprint">private</code> data conveniently available to <em>anonymous</em> inner class
                        </li>
                        <li>
                           Separate <code class="prettyprint">listener</code> for each <code class="prettyprint">view</code> object
                        </li>
                     </ul>

                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="pln">buttonNext</span><span class="pun">.</span><span class="pln">setOnClickListener</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pun">(){</span><span class="pln">
  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onClick</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> v</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// do something when the button is clicked</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></code></pre>

                  </details>

                  <details>
                     <summary>Implement the <code class="prettyprint">interface</code> in the class definition</summary>
                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ActivityMain</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Activity</span><span class="pln"> 
    </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedValues</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun"></span><span class="pln">
    </span><span class="typ">Button</span><span class="pln"> button </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Button</span><span class="pun">)</span><span class="pln">findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">);</span><span class="pln">
    button</span><span class="pun">.</span><span class="pln">setOnClickListener</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onClick</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> view</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// do something when the button is clicked</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
  </span><span class="pun"></span><span class="pln">
</span><span class="pun">}</span></code></pre>

                  </details>

                  <details>
                     <summary>Anonymous implementation of the <code class="prettyprint">interface</code> for any view objects</summary>
                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="com">/* Create an anonymous implementation of OnClickListener 
for all clickable view objects */</span><span class="pln">

</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pln"> mTodoListener </span><span class="pun">=</span><span class="pln"> 
    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">View</span><span class="pun">.</span><span class="typ">OnClickListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onClick</span><span class="pun">(</span><span class="typ">View</span><span class="pln"> v</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// get the clicked object and do something</span><span class="pln">
    </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">.</span><span class="pln">getId</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">case</span><span class="pln"> R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">checkBoxIsComplete</span><span class="pun">:</span><span class="pln">

    </span><span class="kwd">default</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span></code></pre>

                     <p>And the usage would be:</p>
                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="typ">CheckBox</span><span class="pln"> checkboxIsComplete </span><span class="pun">=</span><span class="pln"> 
</span><span class="pun">(</span><span class="typ">CheckBox</span><span class="pun">)</span><span class="pln">findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">checkBoxIsComplete</span><span class="pun">);</span><span class="pln">
checkboxIsComplete</span><span class="pun">.</span><span class="pln">setOnClickListener</span><span class="pun">(</span><span class="pln">mTodoListener</span><span class="pun">);</span></code></pre>

                  </details>

                  <details>
                     <summary>Define the listener in the XML view definition.</summary>
                     <ul>
                        <li>MVC &amp; SoC &mdash; avoid</li>
                     </ul>
                     <pre class="slide-small"><code class="prettyprint">/*
listener implementation with the method name 
defined in the view definition
*/
android:onClick = "onCheckboxIsCompleteClick"</code></pre>
                     with Activity method:
                     <pre class="slide-small"><code class="prettyprint">public void onCheckboxIsCompleteClick(View view) { &hellip; }</code></pre>
                  </details>

               </details>
            </li>
         </ul>
      </article>

      <article id="fragments-slide" class="slide panel">
         <h2>Fragments</h2>
         <div class="slide-article">
            
            <ul>
               <li class="list-style-none left-margin-none panel">
                  <details>
                     <summary>Fragments &amp; MVC &mdash; Decoupling &amp; Cohesion</summary>
                     <img class="width-quarter float-right" src="assets/activity_class_hierarchy.png" alt="FragmentActivity class hierarchy">
                     
                     <ul>
                        <li>
                           Original architecture <em>coupled</em> <code class="prettyprint">Activity</code> &amp; <code class="prettyprint">View</code>
                        </li>
                        <li>
                           Tablets and future Wearables
                        </li>
                        <li>
                           A <code class="prettyprint">Fragment</code> represents a behavior or a portion of user interface, has its own lifecycle, receives its own input events, and can be added or removed while the activity is running
                        </li>
                        <li class="panel">
                           <details>
                              <summary class="">Native Android or Support Libraries?</summary>
                              <ul>
                                 <li>
                                    Google <code class="prettyprint">support-v4</code> library includes fragment support
                                 </li>
                                 <li>The single support library is now a group of libraries: <code class="prettyprint">support-v7, appcompat-v7, recyclerview-v7</code> etc.</li>
                                 <li><em>Avoid the native Android OS implementations and use the Support library versions. Many more releases and easier to update.</em></li>
                              </ul>
                           </details>
                        </li> 
                        
                        <li class="panel">
                           <details>
                              <summary class=""><code class="prettyprint">FragmentManager</code></summary>
                              <ul>                      
                        
                                 <li>
                                    <code class="prettyprint">View</code> <em>decoupled</em> by delegating UI to <code class="prettyprint">Fragment</code>
                                 </li>
                                 <li>
                                    <code class="prettyprint">Activity</code> uses <em>placeholder</em> views for <code class="prettyprint">fragments</code>
                                 </li>
                                 <li>
                                    <code class="prettyprint">Activity</code> uses a <code class="prettyprint">FragmentManager</code> to dynamically add and remove <code class="prettyprint">Fragments</code> from <code class="prettyprint">Views</code> in a fragmentManager <code class="prettyprint">transaction</code>.  
                                 </li>
                                 <li>
                                    <code class="prettyprint">FragmentManager</code> transactions can change fragment combinations for different screen sizes
                                 </li>
                                 <li>
                                    Once added, a <code class="prettyprint">fragment</code> lives in a ViewGroup inside the activity&apos;s view hierarchy and affected by the <code class="prettyprint">Activity</code> lifecycle
                                 </li>

                              </ul>
                           </details>
                        </li>                     
                        <li class="panel">
                           <details>
                              <summary class=""><code class="prettyprint">Fragment</code> Lifecycle</summary>
                              <img class="float-right width-quarter" src="assets/fragment_lifecycle.png" alt="Android Fragment Lifecycle">
                              Commonlifecycle methods implemented:
                              <ul>
                                 <li>
                                    <code class="prettyprint">onCreate()</code> initialize components of the fragment to retain when the fragment is paused or stopped, then resumed
                                 </li>
                                 <li>
                                    <code class="prettyprint">onCreateView()</code> called for fragment to draw its user interface and return a <code class="prettyprint">view</code>
                                 </li>
                                 <li>
                                    <code class="prettyprint">onPause()</code> first indication user is leaving the fragment; persist session data
                                 </li>                                     
                              </ul>
                              
                           </details>
                        </li>
                        
                        <li class="panel">
                           <details>
                           <summary>Getting results with fragments</summary>
                           <ul>
                              <li>
                                 Fragments equivalent to <code class="prettyprint">startActivityForResult()</code> is <code class="prettyprint">Fragment.startActivityForResult()</code>
                              </li>
                              <li>
                                 Instead of overriding <code class="prettyprint">Activity.onActivityResult()</code> override <code class="prettyprint">Fragment.Activity.onActivityResult()</code>
                              </li>
                              <li>
                                 Fragments do not have results, there is no <code class="prettyprint">Fragment</code> setResult, only Activity has <code class="prettyprint">Activity.setResult()</code>
                              </li>
                              <li>
                                 Simple code with <code class="prettyprint">getActivity</code> method to access the parent Activity's intent data directly leads to coupling. <br /><span class="slide-small">Avoid: <code class="prettyprint">getActivity().setResult(Activity.RESULT_OK, null);</code></span>
                              </li>
                              <li>
                                 Instead, <code class="prettyprint">Activity</code> Static method to bundle any arguments and return the fragment<br />
                                 <span class="slide-small">(leads to decoupling as any activity can pass its data and receive the fragment)</span>
                              </li>
                           </ul>
                           </details>
                        </li>                          
                        
                        
                     </ul>
                     
                  </details>
               </li>
               <li class="list-style-none left-margin-none panel">
                  <details>
                     <summary>Todo Controller &amp; Views with fragments</summary>
                     <p class="center"><img src="assets/todo_uml_object_mvc.png" alt="Todo mvc object diagram" class="width-full"></p>
                     <ul>
                        <li>
                           An Activity's view is a container <code class="prettyprint">FrameLayout</code> and remains the same throughout the lifecycle
                           <details>
                              <summary class="">TodoActivity layout</summary>
                              <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"utf-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;FrameLayout</span><span class="pln"> 
  </span><span class="atn">xmlns:android</span><span class="pun">=</span><span class="atv">"http://schemas.android.com/apk/res/android"</span><span class="pln">
  </span><span class="atn">android:id</span><span class="pun">=</span><span class="atv">"@+id/fragment_container"</span><span class="pln">
  </span><span class="atn">android:layout_width</span><span class="pun">=</span><span class="atv">"match_parent"</span><span class="pln">
  </span><span class="atn">android:layout_height</span><span class="pun">=</span><span class="atv">"match_parent"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;/FrameLayout&gt;</span><span class="pln">
          </span></code></pre>
                           </details>
                        </li>

                        <li>
                           add the <code class="prettyprint">fragments</code> to the activity's <em>layout</em>  <span class="red">avoid coupling!</span>
                        </li>

                        <li>
                           TodoFragment: controller object that interacts with view and model.
                           <details>
                              <summary class="">TodoFragment</summary>
                              <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TodoFragment</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Fragment</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Todo</span><span class="pln"> mTodo</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">CheckBox</span><span class="pln"> mCheckBoxIsComplete</span><span class="pun">;</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span><span class="pln">
    mTodo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Todo</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">View</span><span class="pln"> onCreateView</span><span class="pun">(</span><span class="typ">LayoutInflater</span><span class="pln"> inflater</span><span class="pun">,</span><span class="pln"> 
      </span><span class="typ">ViewGroup</span><span class="pln"> container</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">View</span><span class="pln"> view </span><span class="pun">=</span><span class="pln"> inflater</span><span class="pun">.</span><span class="pln">inflate</span><span class="pun">(</span><span class="pln">
      R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">fragment_todo</span><span class="pun">,</span><span class="pln"> container</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
    mCheckBoxIsComplete </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">CheckBox</span><span class="pun">)</span><span class="pln"> 
      view</span><span class="pun">.</span><span class="pln">findViewById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">todo_complete</span><span class="pun">);</span><span class="pln">

    mCheckBoxIsComplete</span><span class="pun">.</span><span class="pln">setOnCheckedChangeListener</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">OnCheckedChangeListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

      </span><span class="lit">@Override</span><span class="pln">
      </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCheckedChanged</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">CompoundButton</span><span class="pln"> buttonView</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isChecked</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        mTodo</span><span class="pun">.</span><span class="pln">setComplete</span><span class="pun">(</span><span class="pln">isChecked</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">

    </span><span class="pun">});</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> view</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

                              <ul>
                                 <li>
                                    Note, <code class="prettyprint">Activity.onCreate</code> had <code class="prettyprint">protected</code> scope, <code class="prettyprint">Fragment.onCreate</code> is <code class="prettyprint">public</code> (reusable by any activity)
                                 </li>
                                 <li>Similar to Activity, a Fragment has a Bundle to save state.</li>
                                 <li>
                                    The previous Activity <code class="prettyprint">setContentView()</code> is no longer called in the <code class="prettyprint">onCreate</code> method</li>
                                 <li>Instead the <code class="prettyprint">onCreateView()</code> explicitly <em>inflates</em> the fragment's view: <code class="prettyprint">inflater.inflate(R.layout.fragment_todo, container, false)</code><br />
                                    (the <code class="prettyprint">false</code> parameter indicates the host Activity will add the fragment)
                                 </li>
                                 <li>
                                    Referencing a view object is now with an <code class="prettyprint">int</code> reference; <code class="prettyprint">view.findViewById(R.id.todo_complete)</code>
                                 </li>
                              </ul>

                           </details>

                        </li>

                        <li>
                           reuse <code class="prettyprint">fragment</code> in any <code class="prettyprint">activity</code>
                           <details>
                              <summary class="">TodoActivity</summary>
                              <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TodoActivity</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AppCompatActivity</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onCreate</span><span class="pun">(</span><span class="pln">savedInstanceState</span><span class="pun">);</span><span class="pln">
    setContentView</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">layout</span><span class="pun">.</span><span class="pln">activity_fragment</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">FragmentManager</span><span class="pln"> fm </span><span class="pun">=</span><span class="pln"> getSupportFragmentManager</span><span class="pun">();</span><span class="pln">
    </span><span class="typ">Fragment</span><span class="pln"> fragment </span><span class="pun">=</span><span class="pln"> 
      fm</span><span class="pun">.</span><span class="pln">findFragmentById</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">fragment_container</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fragment </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">){</span><span class="pln">
      </span><span class="typ">Fragment</span><span class="pln"> todoFragment </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TodoFragment</span><span class="pun">();</span><span class="pln">
      fm</span><span class="pun">.</span><span class="pln">beginTransaction</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">add</span><span class="pun">(</span><span class="pln">R</span><span class="pun">.</span><span class="pln">id</span><span class="pun">.</span><span class="pln">fragment_container</span><span class="pun">,</span><span class="pln"> todoFragment</span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">commit</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun"></span></code></pre>

                              <ul>
                                 <li>The <code class="prettyprint">FragmentManger</code> keeps a <em>Back</em> stack of <code class="prettyprint">FragmentTransactions</code> that can be navigated and a list of <code class="prettyprint">Fragments</code>.</li>
                                 <li><code class="prettyprint">FragmentTransactions</code> are used to <code class="prettyprint">add, remove, attach, detach</code> or <code class="prettyprint">replace</code> fragments.</li>
                                 <li>The <code class="prettyprint">FragmentManager.beginTransaction</code> creates and returns an instance of <code class="prettyprint">FragmentTransaction</code> and not <code class="prettyprint">void</code>, hence it can be chained together.</li>
                                 <li>The <code class="prettyprint">.add</code> method has two parameters, the container view ID and a <code class="prettyprint">fragment</code>. The ID serves two purposes:
                                    <ul>
                                       <li>it identifies where in the Activity's view the <code class="prettyprint">fragment</code> should appear.</li>
                                       <li>it is a unique identifier for the <code class="prettyprint">fragment</code> in the <code class="prettyprint">FragmentManager</code> list</li>
                                    </ul>
                                 </li>
                              </ul>
                              <div>
                                 <img class="float-right width-quarter" src="assets/fragment_lifecycle.png" alt="Android Fragment Lifecycle">
                                 <p>
                                    Why check for <code class="prettyprint">null</code>?
                                 </p>
                                 <ul>
                                    <li>
                                       The <code class="prettyprint">fragment</code> may already be in the in the <code class="prettyprint">FragmentManager</code> list due to events such as destroyed on rotation or to reclaim memory.
                                    </li>
                                 </ul>
                                 <p>
                                    What happens if the <code class="prettyprint">Activity</code> has resumed and a <code class="prettyprint">Fragment</code> is added?
                                 </p>
                                 <ul>
                                    <li>
                                       The <code class="prettyprint">FragmentManager</code> calls all the necessary methods to synchronise with the <code class="prettyprint">Activity</code> state.
                                    </li>
                                    <li>
                                       For example, adding a fragment to a resumed activity results in the fragment getting calls to <code class="prettyprint">onAttach(Context), onCreate(Bundle), onCreateView(), onActivityCreated(Bundle), onStart()</code> and <code class="prettyprint">onResume</code>.
                                    </li>
                                 </ul>
                              </div>

                           </details>
                        </li>

                     </ul>


                  </details>
               </li>
               <li class="list-style-none left-margin-none panel">
                  <details>
                     <summary>Todo Fragment Arguments</summary>
                     <div>
                        <img class="image width-half float-right" src="assets/frag_args.png" alt="Fragment Arguments">
                        <ul>
                           <li>
                              Simple code with <code class="prettyprint">getActivity</code> method to access the parent Activity's intent data directly leads to <em class="red">coupling</em>
                           </li>
                           <li>
                              Static method to bundle any arguments and return the <code class="prettyprint">fragment</code> leads to <em class="green">decoupling</em> as any activity can pass its data and receive the fragment
                           </li>
                        </ul>
                     </div>

                     <details>
                        <summary>Fragment Arguments example</summary>
                        <ul>
                           <li>
                              See <a target="_blank" href="https://github.com/ebbi/todo-component-app">todo-component-app</a>
                           </li>
                        </ul>
                        <pre class="panel"><code class="prettyprint">In TodoFragment
public static TodoFragment newInstance(UUID todoId) {
    Bundle args = new Bundle();
    args.putSerializable(ARG_TODO_ID, todoId);

    TodoFragment fragment = new TodoFragment();
    fragment.setArguments(args);
    return fragment;
}
/*
Any Activity (such as TodoActivity) can 
call the static method and pass it's intent data 
to be bundles and recieve the decoupled fragment
*/
protected Fragment createFragment(){
    UUID todoId = (UUID) getIntent()
      .getSerializableExtra(EXTRA_TODO_ID);
    return TodoFragment.newInstance(todoId);
}

The same pattern was applied to decouple 
intents with data being passed and a static
method returns the intent.

In TodoListFragment
public void onClick(View view) {
  Intent intent = TodoActivity
    .newIntent(getActivity(), mTodo.getId());
  startActivity(intent);
}
and in TodoActivity:
public static Intent newIntent(
    Context packageContext, UUID todoId) {
  Intent intent = new Intent(packageContext, 
   TodoActivity.class);
  intent.putExtra(EXTRA_TODO_ID, todoId);
  return intent;
}</code></pre>

                     </details>

                  </details>
               </li>

               <li class="list-style-none left-margin-none panel">
                  <details>
                     <summary class="">TodoModel for Fragments</summary>
                     <ul>
                        <li>
                           The model provides data to the fragment controller
                        </li>
                        <li>
                           <code class="prettyprint">singleton</code> provides a simple implementation
                        </li>
                     </ul>

                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TodoDS</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">TodoDS</span><span class="pln"> sTodoDS</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Todo</span><span class="pun">&gt;</span><span class="pln"> mTodoList</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">TodoDS</span><span class="pln"> </span><span class="kwd">get</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sTodoDS </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      sTodoDS </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TodoDS</span><span class="pun">(</span><span class="pln">context</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> sTodoDS</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">TodoDS</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">){</span><span class="pln">
    mTodoList </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln">
    </span><span class="com">// simulate some data for testing</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span><span class="pln">
      </span><span class="typ">Todo</span><span class="pln"> todo </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Todo</span><span class="pun">();</span><span class="pln">
      todo</span><span class="pun">.</span><span class="pln">setTitle</span><span class="pun">(</span><span class="str">"Todo title "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span><span class="pln">
      todo</span><span class="pun">.</span><span class="pln">setIsComplete</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
      mTodoList</span><span class="pun">.</span><span class="kwd">add</span><span class="pun">(</span><span class="pln">todo</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Todo</span><span class="pln"> getTodo</span><span class="pun">(</span><span class="pln">UUID todoId</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Todo</span><span class="pln"> todo </span><span class="pun">:</span><span class="pln"> mTodos</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">todo</span><span class="pun">.</span><span class="pln">getId</span><span class="pun">().</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">todoId</span><span class="pun">)){</span><span class="pln">
          </span><span class="kwd">return</span><span class="pln"> todo</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Todo</span><span class="pun">&gt;</span><span class="pln"> getTodos</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> mTodoList</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
                     And the <code class="prettyprint">Todo</code> class
                     <pre class="slide-small"><code class="prettyprint prettyprinted" style=""><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Todo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> UUID mId</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> mTitle</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> mIsComplete</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Todo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      mId </span><span class="pun">=</span><span class="pln"> UUID</span><span class="pun">.</span><span class="pln">randomUUID</span><span class="pun">();</span><span class="pln">
      mDate </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> UUID getId</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> mId</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setId</span><span class="pun">(</span><span class="pln">UUID id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      mId </span><span class="pun">=</span><span class="pln"> id</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getTitle</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> mTitle</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setTitle</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> title</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      mTitle </span><span class="pun">=</span><span class="pln"> title</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>

                  </details>
               </li>
            </ul>

         </div>

      </article>

      <article id="architecture-slide" class="slide panel">
         <h2>Architecture</h2>
         <div class="slide-article">
            <details>
               <summary>Model&dash;View&dash;Controller(MVC)</summary>
               
               <span data-class="image width-full" data-image="MVC diagram" data-local-src="assets/mvc.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fmvc.png?v=1575411771781"></span>
              
               <ul class="float-left">
                  <li>
                     View (Layout files), Controllers (Activities/Fragments), Models (data and persistence)?
                  </li>
                  <li>
                     Business logic in Activity / Fragment
                  </li>
                  <li>
                     Code closely coupled to Android Framework &amp; lifecycle events <em>difficult to test</em>
                  </li>
                  <li>
                     <ul>
                        <li>
                           Activities/Fragments and Views should be the View in MVC
                        </li>
                        <li>
                           Controllers should be separate classes that do not extend Android classes 
                        </li>
                        <li>
                         <a target="_blank" href="https://medium.com/upday-devs/android-architecture-patterns-part-1-model-view-controller-3baecef5f2b6#f68d">Passive Model</a> and <a target="_blank" href="https://medium.com/upday-devs/android-architecture-patterns-part-1-model-view-controller-3baecef5f2b6#f68d">Active Model (model notifies the view)</a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </details>
            <details>
               <summary>Model&dash;View&dash;Presenter(MVP)</summary>
                              
               <span data-class="image width-full" data-image="MVP diagram" data-local-src="assets/mvp.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fmvp.png?v=1575411779112"></span>
               
               <ul>
                  <li>Activities/Fragments are part of the View layer</li>
                  <li>Activity has corresponding Presenter for access to Model</li>
                  <li>
                     Code example TodoMVP
                     <span data-class="image width-full" data-image="MVP Class Structure" data-local-src="assets/MVPClassStructure.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2FMVPClassStructure.png?v=1575417840916"></span>       
                  </li>
                  <li>
                     <a target="_blank" href="https://medium.com/upday-devs/android-architecture-patterns-part-3-model-view-viewmodel-e7eeee76b73b">Google case study, upday app</a></li>
               </ul>
               
            </details>
            
            <details>
               <summary>Model&dash;View&dash;ViewModel</summary>
               
               <details>
                  <summary>Android final architecture, MVx! to MVVM</summary>               
               <span data-class="image width-full" data-image="MVVM diagram" data-local-src="assets/android-final-architecture.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fandroid-final-architecture.png?v=1573684803675"></span>
               
               <ul>
                  <li>
                     Android Data Binding Framework &dash; <code class="prettyprint">ViewModel</code> retrieve data from model when requested from the view</li>
                  <li>
                     Data binding pattern reduces code and <code class="prettyprint">Activities/Fragments</code> become very light weight</li>
                  <li>
                     Unit testing made easier &dash; <code class="prettyprint">ViewModel</code> are decoupled from the view</li>
                  <li>
                     <code class="prettyprint">ViewModel</code> have process scope</li>
                  <li>
                     MVP the <code class="prettyprint">Presenter</code> calls the view to display 
                     </li>
                  <li>
                     MVVM the <code class="prettyprint">ViewModel</code> exposes stream of events for <code class="prettyprint">Views</code> to bind to.  No need for all the MVP interfaces.
                     </li>
                  <li>
                     Separation of concerns (MVC, MVP, MVVM), MVVM advantage is data binding making event driven apps easier by delegating to Model and minimizing logic in Views</li>
                  <li>
                     <a target="_blank" href="https://developer.android.com/jetpack/docs/guide">Google guide to app architecture</a></li>

               </ul>
               
               </details>
               
               <details>
                  <summary>MVVM Implementation</summary>
                              
                  <span data-class="image width-full" data-image="Android MVVM diagram" data-local-src="assets/android-final-architecture.png" data-cdn-src="https://cdn.glitch.com/3943c32b-ac0d-4285-afbf-c67ee5a851ca%2Fandroid-mvvm.png?v=1573685057510"></span>
                  
                  <ul>
                     <li>
                        <a target="_blank" href="https://github.com/ebbi/TodoMVVM">https://github.com/ebbi/TodoMVVM</a></li>
                     <li>
                        Practical: IDE, Gradle plugins, RxJava library <code class="prettyprint">Observable</code> (Java 9 deprecated Observable)</li>
                     <li>
                        <a target="_blank" href="https://medium.com/upday-devs/android-architecture-patterns-part-3-model-view-viewmodel-e7eeee76b73b">Google case study, upday app</a></li>
                  </ul>
                  
               </details>
               
            </details>

         </div>

      </article>

   </div>
   
   <script src="js/run_prettify.js"></script>
   <script src="js/main.js"></script>

</body>

</html>
